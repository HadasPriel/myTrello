(this.webpackJsonpe2e=this.webpackJsonpe2e||[]).push([[0],{168:function(e,t,a){var r={"./homeData.jpg":169,"./homeData1.jpg":170,"./homeNote.jpg":171,"./homeTeam.jpg":172};function n(e){var t=c(e);return a(t)}function c(e){if(!a.o(r,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return r[e]}n.keys=function(){return Object.keys(r)},n.resolve=c,e.exports=n,n.id=168},169:function(e,t,a){"use strict";a.r(t),t.default=a.p+"static/media/homeData.2024cdd8.jpg"},170:function(e,t,a){"use strict";a.r(t),t.default=a.p+"static/media/homeData1.a7a1330f.jpg"},171:function(e,t,a){"use strict";a.r(t),t.default=a.p+"static/media/homeNote.f4c1b031.jpg"},172:function(e,t,a){"use strict";a.r(t),t.default=a.p+"static/media/homeTeam.3c100e2a.jpg"},375:function(e,t,a){},376:function(e,t,a){"use strict";a.r(t);var r=a(0),n=a(1),c=a.n(n),s=a(38),o=a.n(s),i=a(13),d=a(18),l=a(16);function u(e){return Object(r.jsxs)("header",{className:"app-header flex space-between align-center",children:[Object(r.jsxs)("nav",{children:[Object(r.jsx)(d.b,{to:"/",className:"header-home"}),Object(r.jsx)(d.b,{to:"/board",className:"header-board",children:" Boards "})]}),Object(r.jsxs)("nav",{className:"navbar-links",children:[!e.loggedInUser&&Object(r.jsx)(d.b,{to:"/login",className:"header-user",children:" Login"}),e.loggedInUser&&Object(r.jsx)(d.b,{to:"/login",className:"user-img",style:{backgroundImage:"url(".concat(e.loggedInUser.imgUrl,")")},children:" "})]})]})}function p(e){return Object(r.jsxs)("section",{style:{height:document.body.clientHeight-32,paddingTop:document.body.clientHeight/2.4},className:"home-hero",children:[Object(r.jsx)("h1",{className:"app-name",children:"TASX"}),Object(r.jsx)("h3",{children:"Manage your teamwork with the ease of your fingers"}),Object(r.jsx)("button",{className:"scroll-down",onClick:e.scrollToBottom})]})}function b(){return Object(r.jsx)("section",{className:"about-me",children:Object(r.jsxs)("div",{className:"main-container",children:[Object(r.jsxs)("header",{children:[Object(r.jsx)("h2",{children:"Meet the team"}),Object(r.jsx)("p",{children:"We are MisterBit\xa9 Coding Academy alumni that came together and assembled TASX as our Full-Stack Developer course's final hand-in."})]}),Object(r.jsx)("ul",{className:"cv-list flex justify-center",children:[{name:"Hadas Priel",img:"https://res.cloudinary.com/ddgevj2yp/image/upload/v1610985212/T01C3G80Y9K-U01DZHFHVDW-dbfd8d80a8ed-512_zadnxc.jpg",txt:["Full Stack Web Developer","B.A. Psychology and Education, Ben Gurion University","Management experience"],email:"hadass91@gmail.com",facebook:"https://www.facebook.com/hadas.eliav",linkedin:"https://www.linkedin.com/in/hadas-eliav-priel-aa6705a2"},{name:"Sandra Zufman",img:"https://res.cloudinary.com/ddgevj2yp/image/upload/v1610985272/T01C3G80Y9K-U01C55ZS84D-198fe46a1d2e-512_foiwqp.jpg",txt:["Full Stack Web Developer.","B.A. Administration and Management, Accounting,","The College of Management and Academic Studies","Communicative and a team player"],email:"s.zufman@outlook.com",facebook:"https://www.facebook.com/zufman",linkedin:"https://www.linkedin.com/in/sandra-zufman-3784462b"}].map((function(e){return Object(r.jsxs)("li",{className:"cv flex col align-center",children:[Object(r.jsx)("img",{className:"user-img",src:e.img,alt:e.img}),Object(r.jsxs)("div",{className:"txt",children:[Object(r.jsx)("h3",{children:e.name}),e.txt.map((function(e){return Object(r.jsxs)("p",{className:"skil",children:[e," "]},e)})),Object(r.jsxs)("nav",{className:"social-media",children:[Object(r.jsx)("a",{href:e.linkedin,className:"linkedin"}),Object(r.jsx)("a",{href:e.facebook,className:"facebook"}),Object(r.jsx)("a",{href:"mailto:".concat(e.email),className:"email"})]})]})]},e.name)}))})]})})}function h(){return Object(r.jsx)("footer",{className:"app-footer"})}function j(){return Object(r.jsx)("section",{className:"about-tasx main-container",children:Object(r.jsxs)("ul",{className:"",children:[[{img:"homeNote",title:"Hit your deadlines",txt:"Collaborate, manage projects, and reach new productivity peaks. From high rises to the home office, the way your team works is unique - accomplish it all with TASX.",flexDiraction:""},{img:"homeTeam",title:"Keep everyone looped in",txt:"Start with a TASX board, lists, and cards. Customize and expand with more features as your teamwork grows. Manage projects, organize tasks, and build team spirit - all in one place.",flexDiraction:"reverse"},{img:"homeData1",title:"Stay updated on project's progress",txt:"Quick access to data about the progress of the tasks and team members in your projects, all shown in formatted graphs.",flexDiraction:""}].map((function(e){return Object(r.jsxs)("li",{className:"about-unit flex space-between ".concat(e.flexDiraction),children:[Object(r.jsxs)("div",{className:"txt",children:[Object(r.jsx)("h3",{children:e.title}),Object(r.jsx)("p",{className:"",children:e.txt})]}),Object(r.jsx)("img",{className:" ".concat(e.flexDiraction),src:a(168)("./".concat(e.img,".jpg")).default,alt:""})]},e.img)})),Object(r.jsxs)("li",{className:"cta about-unit flex justify-center align-center space-between",children:[Object(r.jsxs)("div",{children:[Object(r.jsx)("h3",{children:"What are you wating for?"}),Object(r.jsx)("p",{children:"Build bords or use our templates to manage your projects"})]}),Object(r.jsx)(d.b,{to:"/board",children:Object(r.jsx)("button",{className:"start-btn",children:"start here"})})]})]})})}var g=Object(i.b)((function(e){return{loggedInUser:e.userModule.loggedInUser}}))((function(e){var t=e.loggedInUser;return Object(r.jsxs)("div",{className:"home-page",children:[Object(r.jsx)(u,{loggedInUser:t}),Object(r.jsx)(p,{scrollToBottom:function(){window.scrollTo(0,document.body.scrollHeight)}}),Object(r.jsx)(j,{}),Object(r.jsx)(b,{}),Object(r.jsx)(h,{})]})})),m=a(5),f=a(3),O=a.n(f),v=a(7),x=a(9),y=a(10),k=a(12),w=a(11),C=a(150),N="/api/",S=a.n(C).a.create({withCredentials:!0}),B=function(e,t){return E(e,"GET",t)},A=function(e,t){return E(e,"POST",t)},D=function(e,t){return E(e,"PUT",t)},M=function(e,t){return E(e,"DELETE",t)};function E(e){return I.apply(this,arguments)}function I(){return(I=Object(v.a)(O.a.mark((function e(t){var a,r,n,c=arguments;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=c.length>1&&void 0!==c[1]?c[1]:"get",r=c.length>2&&void 0!==c[2]?c[2]:null,e.prev=2,e.next=5,S({url:"".concat(N).concat(t),method:a,data:r});case 5:return n=e.sent,e.abrupt("return",n.data);case 9:throw e.prev=9,e.t0=e.catch(2),console.log("Had Issues ".concat(a,"ing to the backend, endpoint: ").concat(t,", with data: ").concat(r)),console.dir(e.t0),e.t0.response&&401===e.t0.response.status&&window.location.assign("/#/login"),e.t0;case 15:case"end":return e.stop()}}),e,null,[[2,9]])})))).apply(this,arguments)}var U=a(151),T=a.n(U),_=function(){var e=null;return{setup:function(){return Object(v.a)(O.a.mark((function t(){return O.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e=T()("");case 1:case"end":return t.stop()}}),t)})))()},on:function(t,a){e.on(t,a)},off:function(t){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;e&&(a?e.off(t,a):e.removeAllListeners(t))},emit:function(t,a){e.emit(t,a)},terminate:function(){e=null}}}();window.socketService=_,_.setup();var L={login:function(e){return P.apply(this,arguments)},logout:function(){return H.apply(this,arguments)},signup:function(e){return J.apply(this,arguments)},getUsers:function(){return B("user")},getById:function(e){return B("user/".concat(e))},remove:function(e){return M("user/".concat(e))},update:F,getLoggedinUser:X,increaseScore:function(){return G.apply(this,arguments)}};function F(e){return R.apply(this,arguments)}function R(){return(R=Object(v.a)(O.a.mark((function e(t){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,D("user/".concat(t._id),t);case 2:t=e.sent,X()._id===t._id&&z(t);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function G(){return(G=Object(v.a)(O.a.mark((function e(){var t,a,r=arguments;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=r.length>0&&void 0!==r[0]?r[0]:10,(a=X()).score=a.score+t||t,e.next=5,F(a);case 5:return e.abrupt("return",a.score);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function P(){return(P=Object(v.a)(O.a.mark((function e(t){var a;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,A("auth/login",t);case 2:if(a=e.sent,_.emit("set-user-socket",a._id),!a){e.next=6;break}return e.abrupt("return",z(a));case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function J(){return(J=Object(v.a)(O.a.mark((function e(t){var a;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,A("auth/signup",t);case 2:return a=e.sent,e.abrupt("return",z(a));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function H(){return(H=Object(v.a)(O.a.mark((function e(){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return sessionStorage.clear(),e.next=3,A("auth/logout");case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function z(e){return sessionStorage.setItem("loggedinUser",JSON.stringify(e)),e}function X(){return JSON.parse(sessionStorage.getItem("loggedinUser"))}var q={delay:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1500;return new Promise((function(t){setTimeout(t,e)}))},getRandomInt:function(e,t){return e=Math.ceil(e),t=Math.floor(t),Math.floor(Math.random()*(t-e)+e)},makeId:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:5,t="",a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",r=0;r<e;r++)t+=a.charAt(Math.floor(Math.random()*a.length));return t}};var W={add:function(e){return K.apply(this,arguments)},query:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=new URLSearchParams;return t.set("userId",e.userId),B("board?".concat(t))},remove:function(e){return M("board/".concat(e))},getById:function(e){return B("board/".concat(e))},makeGroup:V,updateBoard:function(e){return Z.apply(this,arguments)},makeCard:function(e){return{id:"c"+q.makeId(),title:e,description:"",comments:[],checklists:[],members:[],labels:[],createdAt:Date.now(),dueDate:"",byMember:{},style:{coverType:"top"}}},makeBoard:function(e,t){return te.apply(this,arguments)},filterByCardTitle:function(e,t){return ae.apply(this,arguments)},makeActivity:Y};function Z(){return(Z=Object(v.a)(O.a.mark((function e(t){var a,r;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=L.getLoggedinUser(),e.next=3,D("board/".concat(t._id),{board:t,userId:(null===a||void 0===a?void 0:a._id)||null});case 3:return r=e.sent,e.abrupt("return",r);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function K(){return(K=Object(v.a)(O.a.mark((function e(t){var a;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,A("board",t);case 2:return a=e.sent,e.abrupt("return",a);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function V(e){return{id:"g"+q.makeId(),title:e,cards:[{id:"c"+q.makeId(),title:"default-empty",description:"",comments:[],checklists:[],members:[],labels:[],createdAt:Date.now(),dueDate:"",byMember:{},style:{coverType:"top"}}]}}function Y(e){return Q.apply(this,arguments)}function Q(){return(Q=Object(v.a)(O.a.mark((function e(t){var a,r,n=arguments;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=n.length>1&&void 0!==n[1]?n[1]:{},e.t0="a"+q.makeId(),e.t1=Date.now(),e.t2=t,e.next=6,$();case 6:return e.t3=e.sent,e.t4=a,r={id:e.t0,createdAt:e.t1,txt:e.t2,byMember:e.t3,card:e.t4},e.abrupt("return",r);case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function $(){return ee.apply(this,arguments)}function ee(){return(ee=Object(v.a)(O.a.mark((function e(){var t,a;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t=L.getLoggedinUser())){e.next=5;break}e.t0=t,e.next=8;break;case 5:return e.next=7,L.login({username:"Guest",password:"123"});case 7:e.t0=e.sent;case 8:return a=e.t0,e.abrupt("return",a);case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function te(){return(te=Object(v.a)(O.a.mark((function e(t,a){var r,n,c,s,o;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=["#61BD4F","#F2D600","#FF9F1A","#EB5A46","#C377E0","#0079BF"].map((function(e){return{id:e,title:"",accessibility:""}})),e.next=4,$();case 4:return n=e.sent,c={title:t,createdAt:Date.now(),createdBy:n,style:{bgurl:a},members:[n],groups:[V("New List")],activities:[],labels:r},e.next=8,Y("Created Board");case 8:return s=e.sent,c.activities.unshift(s),e.next=12,A("board",c);case 12:return o=e.sent,e.abrupt("return",o);case 14:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ae(){return(ae=Object(v.a)(O.a.mark((function e(t,a){var r;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("Board got to board service",t),console.log("filter got to board service",a),a.title&&(r=new RegExp(a.title,"i"),t.groups=t.groups.map((function(e){var t=Object(m.a)({},e);return t.cards=t.cards.filter((function(e){return r.test(e.title)})),t}))),e.abrupt("return",t);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function re(e){return function(){var t=Object(v.a)(O.a.mark((function t(a){var r;return O.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,W.getById(e);case 3:r=t.sent,a({type:"SET_BOARD",board:r}),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),console.log("BoardActions: err in loadBoard",t.t0);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e){return t.apply(this,arguments)}}()}function ne(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return function(){var r=Object(v.a)(O.a.mark((function r(n){var c,s,o;return O.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(r.prev=0,c=JSON.parse(JSON.stringify(e)),!t){r.next=7;break}return r.next=5,W.makeActivity(t,a);case 5:s=r.sent,c.activities.unshift(s);case 7:return r.next=9,W.updateBoard(c);case 9:o=r.sent,n({type:"SET_BOARD",board:o}),r.next=16;break;case 13:r.prev=13,r.t0=r.catch(0),console.log("BoardActions: err in updateGroupOrder",r.t0);case 16:case"end":return r.stop()}}),r,null,[[0,13]])})));return function(e){return r.apply(this,arguments)}}()}var ce=a(17),se=function(e){Object(k.a)(a,e);var t=Object(w.a)(a);function a(){var e;Object(x.a)(this,a);for(var r=arguments.length,n=new Array(r),c=0;c<r;c++)n[c]=arguments[c];return(e=t.call.apply(t,[this].concat(n))).state={title:""},e.handleChange=function(t){var a=t.target.value,r=t.target.name;e.setState(Object(ce.a)({},r,a))},e.onSubmit=function(){var t=Object(v.a)(O.a.mark((function t(a){return O.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a.preventDefault(),e.state.title){t.next=3;break}return t.abrupt("return");case 3:return t.next=5,e.props.updateGroup(e.state.title,e.props.group.id,e.props.selectedBoard);case 5:e.props.toggleEditMode();case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e}return Object(y.a)(a,[{key:"componentDidMount",value:function(){var e=this.props.group.title;this.setState({title:e})}},{key:"render",value:function(){return Object(r.jsx)("div",{className:"edit-group-title",children:Object(r.jsxs)("form",{onSubmit:this.onSubmit,children:[Object(r.jsx)("input",{className:"new-title-input",placeholder:"Group Title",type:"text",onChange:this.handleChange,value:this.state.title,name:"title",autoComplete:"off"}),Object(r.jsx)("button",{className:"save-btn",children:"Save"})]})})}}]),a}(n.Component),oe={updateGroup:function(e,t,a){return function(){var r=Object(v.a)(O.a.mark((function r(n){var c,s,o;return O.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,c=JSON.parse(JSON.stringify(a)),s=c.groups.findIndex((function(e){return e.id===t})),c.groups[s].title=e,r.next=6,W.updateBoard(c);case 6:o=r.sent,n({type:"SET_BOARD",board:o}),r.next=13;break;case 10:r.prev=10,r.t0=r.catch(0),console.log("BoardActions: err in updateGroup",r.t0);case 13:case"end":return r.stop()}}),r,null,[[0,10]])})));return function(e){return r.apply(this,arguments)}}()}},ie=Object(i.b)((function(e){return{selectedBoard:e.boardModule.selectedBoard}}),oe)(se);function de(e){return Object(r.jsx)("div",{children:Object(r.jsx)("ul",{className:"card-label-show",children:e.labels.map((function(e){return Object(r.jsx)("li",{className:"label ".concat(e.id)},e.id)}))})})}function le(){return function(){var e=Object(v.a)(O.a.mark((function e(t){var a;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t({type:"LOADING_START"}),e.next=4,L.getUsers();case 4:a=e.sent,t({type:"SET_USERS",users:a}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log("UserActions: err in loadUsers",e.t0);case 11:return e.prev=11,t({type:"LOADING_DONE"}),e.finish(11);case 14:case"end":return e.stop()}}),e,null,[[0,8,11,14]])})));return function(t){return e.apply(this,arguments)}}()}function ue(e){var t=function(t){e.toggleShowingNav(t.target.name)};return Object(r.jsxs)("nav",{className:"card-edit-nav flex column",children:[Object(r.jsx)("h3",{children:"Add to card"}),Object(r.jsx)("button",{className:"label-fa",name:"labelPalette",onClick:t,children:" Labels"}),Object(r.jsx)("button",{className:"checklist-fa",name:"checklist",onClick:t,children:" Checklist"}),Object(r.jsx)("button",{className:"cover-fa",name:"cover",onClick:t,children:" Cover"}),Object(r.jsx)("button",{className:"duetime-fa",name:"dueTime",onClick:t,children:" Due Date"}),Object(r.jsx)("button",{className:"duetime-fa",name:"members",onClick:t,children:" Members"}),Object(r.jsx)("button",{className:"delete-fa",name:"delete",onClick:t,children:" Delete"}),Object(r.jsx)("button",{className:"img-fa",name:"img",onClick:t,children:" Image"})]})}var pe=function(e){Object(k.a)(a,e);var t=Object(w.a)(a);function a(){var e;Object(x.a)(this,a);for(var r=arguments.length,n=new Array(r),c=0;c<r;c++)n[c]=arguments[c];return(e=t.call.apply(t,[this].concat(n))).removeLable=function(t){var a=Object(m.a)({},e.props.card),r=a.labels.filter((function(e){return e.id!==t}));a.labels=r,e.props.updateCard(a)},e}return Object(y.a)(a,[{key:"render",value:function(){return Object(r.jsxs)("div",{children:[Object(r.jsx)("h5",{children:"Labels "}),Object(r.jsx)("ul",{className:"card-label-show",children:this.props.labels.map((function(e){return Object(r.jsx)("li",{className:"label-edit ".concat(e.id," flex align-center justify-center "),children:Object(r.jsx)("p",{className:"label-title",children:e.title})},e.id)}))})]})}}]),a}(n.Component),be=Object(i.b)((function(e){return{}}),{})(pe),he=a(50),je=function(e){Object(k.a)(a,e);var t=Object(w.a)(a);function a(){var e;Object(x.a)(this,a);for(var r=arguments.length,n=new Array(r),c=0;c<r;c++)n[c]=arguments[c];return(e=t.call.apply(t,[this].concat(n))).state={},e.handleChange=function(){var t=Object(v.a)(O.a.mark((function t(a){var r,n,c,s;return O.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return(r=Object(m.a)({},e.state.todo)).isDone=a.target.checked,t.next=4,e.setState({todo:r});case 4:return n=Object(m.a)({},e.props.card),c=n.checklists.findIndex((function(t){return t.id===e.props.checklistId})),s=n.checklists[c].todos.findIndex((function(t){return t.id===e.state.todo.id})),n.checklists[c].todos[s]=e.state.todo,t.prev=8,t.next=11,e.props.updateCard(n);case 11:t.next=16;break;case 13:t.prev=13,t.t0=t.catch(8),console.log(t.t0);case 16:case"end":return t.stop()}}),t,null,[[8,13]])})));return function(e){return t.apply(this,arguments)}}(),e}return Object(y.a)(a,[{key:"componentDidMount",value:function(){this.setState({todo:this.props.todo})}},{key:"render",value:function(){var e=this,t=this.state.todo;return t?Object(r.jsxs)("li",{className:"todo-show flex space-between align-center",children:[Object(r.jsxs)("span",{className:"content",children:[Object(r.jsx)("input",{type:"checkbox",name:"isDone",value:t.isDone,checked:t.isDone,onChange:this.handleChange}),Object(r.jsx)("h3",{className:"".concat(t.isDone),children:t.txt})]}),Object(r.jsx)("span",{className:"nav",children:Object(r.jsx)("button",{className:" delete",onClick:function(){e.props.removeTodo(t.id,e.props.checklistId)}})})]}):Object(r.jsx)("div",{children:"Loading..."})}}]),a}(n.Component),ge=Object(i.b)((function(e){return{}}),{})(je);function me(e){var t=e.checklist,a=e.card,n=e.updateCard,c=e.removeTodo;return Object(r.jsx)("ul",{className:"show",children:t.todos.map((function(e){return Object(r.jsx)(ge,{todo:e,card:a,checklistId:t.id,updateCard:n,removeTodo:c},e.id)}))})}var fe=function(e){Object(k.a)(a,e);var t=Object(w.a)(a);function a(){var e;Object(x.a)(this,a);for(var r=arguments.length,n=new Array(r),c=0;c<r;c++)n[c]=arguments[c];return(e=t.call.apply(t,[this].concat(n))).state={todo:{txt:"",isDone:!1},progress:0},e.removeChecklist=function(t){var a=Object(m.a)({},e.props.card),r=a.checklists.filter((function(e){return e.id!==t}));a.checklists=r,console.log("cardToSave",a),e.props.updateCard(a)},e.handleTaskChange=function(t){var a=Object(m.a)({},e.state.todo);"isDone"===t.target.name?a.isDone=t.target.checked:a[t.target.name]=t.target.value,e.setState({todo:a})},e.addTask=function(t,a){t.preventDefault();var r=Object(m.a)(Object(m.a)({},e.state.todo),{},{id:q.makeId()}),n=Object(m.a)({},e.props.card),c=n.checklists.find((function(e){return e.id===a}));c.todos=c.todos?[].concat(Object(he.a)(c.todos),[r]):[r];var s=n.checklists.map((function(e){return e.id===a?c:e}));n.checklists=s,console.log("cardToSave",n),e.props.updateCard(n).then(e.setState({todo:{txt:"",isDone:!1}}))},e.removeTodo=function(t,a){var r=Object(m.a)({},e.props.card),n=r.checklists.findIndex((function(e){return e.id===a})),c=r.checklists[n].todos.filter((function(e){return e.id!==t}));r.checklists[n].todos=c,e.props.updateCard(r)},e.getProgress=function(){var t=0,a=0;e.props.checklists.forEach((function(e){e.todos.forEach((function(e){!0===e.isDone&&t++,a++}))}));var r=Math.round(t/a*100);e.setState({progress:r})},e}return Object(y.a)(a,[{key:"componentDidMount",value:function(){this.getProgress()}},{key:"componentDidUpdate",value:function(e,t){e!==this.props&&this.getProgress()}},{key:"render",value:function(){var e=this,t=this.props.checklists;if(!t||!t.length)return Object(r.jsx)("div",{});var a=this.state,n=a.todo,c=a.progress,s=100===c?"done":"";return Object(r.jsxs)("ul",{className:"card-checklist-show card-show ",children:[Object(r.jsxs)("div",{className:"show flex align-center",children:[Object(r.jsx)("span",{children:"".concat(c,"%")}),Object(r.jsx)("div",{className:"progress-wraper",children:Object(r.jsx)("div",{className:"progress-inner ".concat(s),style:{width:"".concat(c,"%")}})})]}),t.map((function(t){return Object(r.jsxs)("li",{className:"checklist-wraper",children:[Object(r.jsxs)("header",{className:"flex space-between",children:[Object(r.jsxs)("h4",{className:"checklist-title",children:[" ",t.title]}),Object(r.jsx)("button",{className:"edit-btn",onClick:function(){e.removeChecklist(t.id)},children:"Delete"})]}),Object(r.jsx)(me,{checklist:t,card:e.props.card,updateCard:e.props.updateCard,removeTodo:e.removeTodo}),Object(r.jsxs)("form",{onSubmit:function(a){e.addTask(a,t.id)},children:[Object(r.jsx)("input",{type:"text",name:"txt",value:n.txt,onChange:e.handleTaskChange,placeholder:"Add an item",autoComplete:"off",required:!0}),Object(r.jsx)("button",{className:"add-btn",children:"Add"})]})]},t.id)}))]})}}]),a}(n.Component),Oe=Object(i.b)((function(e){return{}}),{})(fe);function ve(e){var t=e.card,a="";switch(new Date(t.duedate).getMonth()+1){case 1:a="Jan";break;case 2:a="Feb";break;case 3:a="Mar";break;case 4:a="Apr";break;case 5:a="May";break;case 6:a="Jun";break;case 7:a="Jul";break;case 8:a="Aug";break;case 9:a="Sep";break;case 10:a="Oct";break;case 11:a="Nov";break;case 12:a="Dec"}var n=t.duedate.substring(8,10),c=new Date(t.duedate)-Date.now()<864e5?"urgent":"";return Object(r.jsxs)("div",{className:"duedate",children:[Object(r.jsx)("h5",{children:"Due Date "}),Object(r.jsx)("p",{className:"duetime-fa ".concat(c," "),children:" ".concat(a," ").concat(n)})]})}function xe(e){var t=e.card.img;return Object(r.jsx)("div",{className:"card-img",children:Object(r.jsx)("span",{className:"card-ow",children:Object(r.jsx)("img",{className:"show",src:t,alt:""})})})}function ye(e){return Object(r.jsxs)("div",{className:"members",children:[e.isBig&&Object(r.jsx)("h5",{children:"Members "}),Object(r.jsx)("ul",{className:"card-member-show flex flex-end",children:e.members.map((function(e){var t={backgroundImage:"url(".concat(e.imgUrl,")")};return Object(r.jsx)("li",{style:t,className:"user-img"},e._id)}))})]})}function ke(e){var t,a=e.time,n=new Date(a),c=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"][n.getMonth()],s=n.getDate(),o=n.getHours(),i=n.getMinutes();i<10&&(i="0"+i),o<10&&(o="0"+o);var d=c+" "+s,l=" at "+o+":"+i;switch(Date.now()-a){case Date.now()-a<6e4:t="Just now";break;case Date.now()-a<12e4:t="a minute ago"+l;break;case Date.now()-a<18e4:t="two minute ago"+l;break;case Date.now()-a<24e4:t="three minute ago"+l;break;case Date.now()-a<3e5:t="four minute ago"+l;break;case Date.now()-a<36e4:t="about five minute ago"+l;break;case Date.now()-a<186e4:t="half an hour ago"+l;break;case Date.now()-a<366e4:t="an hour ago"+l;break;case Date.now()-a<864e5:t="an few houers ago"+l;break;case Date.now()-a<10368e6:t="an day ago"+l;break;default:t=d+l}return Object(r.jsx)("small",{className:"activity-time",children:t})}var we=function(e){Object(k.a)(a,e);var t=Object(w.a)(a);function a(){return Object(x.a)(this,a),t.apply(this,arguments)}return Object(y.a)(a,[{key:"render",value:function(){var e=this;return Object(r.jsxs)("section",{children:[Object(r.jsx)("h4",{className:"activity-sign",children:"Activity"}),Object(r.jsx)("ul",{className:"card-activities-show card-show show",children:this.props.activities.map((function(t){return t.card.id===e.props.card.id?Object(r.jsxs)("li",{className:"flex align-center",children:[Object(r.jsx)("div",{className:"user-img inline-block",style:{backgroundImage:"url(".concat(t.byMember.imgUrl,")")}}),Object(r.jsxs)("div",{className:"txt",children:[Object(r.jsxs)("p",{children:[Object(r.jsxs)("span",{children:[t.byMember.fullname," "]})," "," ".concat(t.txt," to this card")]}),Object(r.jsx)(ke,{time:t.createdAt})]})]},t.id):""}))})]})}}]),a}(n.Component),Ce=Object(i.b)((function(e){return{}}),{})(we),Ne=function(e){Object(k.a)(a,e);var t=Object(w.a)(a);function a(){var e;Object(x.a)(this,a);for(var r=arguments.length,n=new Array(r),c=0;c<r;c++)n[c]=arguments[c];return(e=t.call.apply(t,[this].concat(n))).state={checklist:{title:"",todos:[]}},e.handleChange=function(t){var a=Object(m.a)({},e.state.checklist);a[t.target.name]=t.target.value,e.setState({checklist:a})},e.onAddChecklist=function(t){t.preventDefault();var a=Object(m.a)({id:q.makeId()},e.state.checklist),r=Object(m.a)({},e.props.card);r.checklists=r.checklists?[].concat(Object(he.a)(r.checklists),[a]):[a],e.props.updateCard(r,"added checklist"),e.setState({checklist:{title:"",todos:[]}}),e.props.toggleChecklistBar()},e}return Object(y.a)(a,[{key:"render",value:function(){return Object(r.jsxs)("form",{className:"edit-bar",onSubmit:this.onAddChecklist,children:[Object(r.jsxs)("header",{className:"seconde",children:[Object(r.jsx)("h3",{children:"Add Checklist"}),Object(r.jsx)("button",{onClick:this.props.toggleChecklistBar,children:"x"})]}),Object(r.jsxs)("main",{children:[Object(r.jsxs)("label",{children:["Title",Object(r.jsx)("input",{type:"text",name:"title",value:this.state.checklist.title,placeholder:"Enter Title",onChange:this.handleChange,autoComplete:"off",required:!0,autoFocus:!0})]}),Object(r.jsx)("button",{className:"add-btn",children:"Add"})]})]})}}]),a}(n.Component),Se=Object(i.b)((function(e){return{}}),{})(Ne),Be=function(e){Object(k.a)(a,e);var t=Object(w.a)(a);function a(){var e;Object(x.a)(this,a);for(var r=arguments.length,n=new Array(r),c=0;c<r;c++)n[c]=arguments[c];return(e=t.call.apply(t,[this].concat(n))).state={},e.handleStyle=function(){var t=Object(v.a)(O.a.mark((function t(a){var r;return O.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return(r=Object(m.a)({},e.props.card)).style=r.style?Object(m.a)(Object(m.a)({},r.style),{},Object(ce.a)({},a.target.name,a.target.value)):Object(ce.a)({},a.target.name,a.target.value),t.next=4,e.props.updateCard(r);case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.removeCover=function(){var t=Object(v.a)(O.a.mark((function t(a){var r;return O.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a.preventDefault(),(r=Object(m.a)({},e.props.card)).style={coverType:"top"},t.next=5,e.props.updateCard(r);case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e}return Object(y.a)(a,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){return Object(r.jsxs)("div",{className:"add-cover-bar edit-bar",children:[Object(r.jsxs)("header",{className:"seconde",children:[Object(r.jsx)("h3",{children:"cover"}),Object(r.jsx)("button",{onClick:this.props.toggleCoverBar,children:"x"})]}),Object(r.jsx)("button",{onClick:this.removeCover,className:"edit-btn remove",children:"Remove Cover "}),Object(r.jsx)("h5",{children:"size"}),Object(r.jsxs)("main",{children:[Object(r.jsxs)("label",{className:"inline-block",children:[Object(r.jsxs)("div",{className:"full demo window",children:[Object(r.jsx)("div",{className:"demo header"}),Object(r.jsxs)("div",{className:"demo content",children:[Object(r.jsx)("div",{className:"demo p1"}),Object(r.jsx)("div",{className:"demo p2"})]})]}),Object(r.jsx)("input",{type:"radio",name:"coverType",value:"full",onClick:this.handleStyle})]}),Object(r.jsxs)("label",{className:"inline-block",children:[Object(r.jsxs)("div",{className:"top demo window",children:[Object(r.jsx)("div",{className:"demo header"}),Object(r.jsxs)("div",{className:"demo content",children:[Object(r.jsx)("div",{className:"demo p1"}),Object(r.jsx)("div",{className:"demo p2"})]})]}),Object(r.jsx)("input",{type:"radio",name:"coverType",value:"top",onClick:this.handleStyle})]})]}),Object(r.jsx)("h5",{children:"colors"}),Object(r.jsx)("main",{children:Object(r.jsxs)("nav",{className:"colors",children:[Object(r.jsx)("label",{className:"color #7bc86c",children:Object(r.jsx)("input",{type:"radio",name:"bgColor",value:"#7bc86c",onClick:this.handleStyle})}),Object(r.jsx)("label",{className:"color #f5dd29",children:Object(r.jsx)("input",{type:"radio",name:"bgColor",value:"#f5dd29",onClick:this.handleStyle})}),Object(r.jsx)("label",{className:"color #ffaf3f",children:Object(r.jsx)("input",{type:"radio",name:"bgColor",value:"#ffaf3f",onClick:this.handleStyle})}),Object(r.jsx)("label",{className:"color #ef7564",children:Object(r.jsx)("input",{type:"radio",name:"bgColor",value:"#ef7564",onClick:this.handleStyle})}),Object(r.jsx)("label",{className:"color #cd8de5",children:Object(r.jsx)("input",{type:"radio",name:"bgColor",value:"#cd8de5",onClick:this.handleStyle})}),Object(r.jsx)("label",{className:"color #5ba4cf",children:Object(r.jsx)("input",{type:"radio",name:"bgColor",value:"#5ba4cf",onClick:this.handleStyle})}),Object(r.jsx)("label",{className:"color #29cce5",children:Object(r.jsx)("input",{type:"radio",name:"bgColor",value:"#29cce5",onClick:this.handleStyle})}),Object(r.jsx)("label",{className:"color #6deca9",children:Object(r.jsx)("input",{type:"radio",name:"bgColor",value:"#6deca9",onClick:this.handleStyle})}),Object(r.jsx)("label",{className:"color #ff8ed4",children:Object(r.jsx)("input",{type:"radio",name:"bgColor",value:"#ff8ed4",onClick:this.handleStyle})}),Object(r.jsx)("label",{className:"color #172b4d",children:Object(r.jsx)("input",{type:"radio",name:"bgColor",value:"#172b4d",onClick:this.handleStyle})})]})})]})}}]),a}(n.Component),Ae=Object(i.b)((function(e){return{}}),{})(Be),De=a(157),Me=a(152),Ee=a.n(Me);a(220);function Ie(e){var t=Object(n.useState)(new Date),a=Object(De.a)(t,2),c=a[0],s=a[1];return Object(r.jsxs)("div",{className:"edit-bar",children:[Object(r.jsxs)("header",{className:"seconde",children:[Object(r.jsx)("h3",{children:"Due Date"}),Object(r.jsx)("button",{onClick:e.toggleAddDeutime,children:"x"})]}),Object(r.jsx)("main",{children:Object(r.jsx)(Ee.a,{selected:c,onSelect:function(t){return s((function(){e.addDeuDate(t)}))},inline:!0})})]})}var Ue={uploadImg:function(e){return _e.apply(this,arguments)}},Te="dtg8d5gnc";function _e(){return(_e=Object(v.a)(O.a.mark((function e(t){var a,r,n,c;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a="https://api.cloudinary.com/v1_1/".concat(Te,"/image/upload"),(r=new FormData).append("file",t),r.append("upload_preset","mkdsw2hg"),e.prev=4,e.next=7,fetch(a,{method:"POST",body:r});case 7:return n=e.sent,e.next=10,n.json();case 10:return c=e.sent,e.abrupt("return",c);case 14:e.prev=14,e.t0=e.catch(4),console.log(e.t0);case 17:case"end":return e.stop()}}),e,null,[[4,14]])})))).apply(this,arguments)}var Le=function(e){Object(k.a)(a,e);var t=Object(w.a)(a);function a(){var e;Object(x.a)(this,a);for(var r=arguments.length,n=new Array(r),c=0;c<r;c++)n[c]=arguments[c];return(e=t.call.apply(t,[this].concat(n))).state={imgUrl:null,height:300,width:300,isUploading:!1},e.onUploadImg=function(){var t=Object(v.a)(O.a.mark((function t(a){var r,n,c,s;return O.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.setState({isUploading:!0}),t.next=3,Ue.uploadImg(a.target.files[0]);case 3:r=t.sent,n=r.secure_url,c=r.height,s=r.width,e.setState({imgUrl:n,isUploading:!1,height:c,width:s}),e.props.addImg(n);case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e}return Object(y.a)(a,[{key:"render",value:function(){var e=this.state,t=e.imgUrl,a=e.isUploading,n={backgroundImage:"url(".concat(t,")"),objectFit:"cover"};return Object(r.jsxs)("div",{className:"uploader flex align-center justify-center",style:n,children:[Object(r.jsx)("label",{htmlFor:"imageUploader",children:a?"Uploading....":"Upload Image"}),Object(r.jsx)("input",{onChange:this.onUploadImg,type:"file",accept:"image/*",id:"imageUploader",style:{display:"none"}})]})}}]),a}(n.Component);function Fe(e){return Object(r.jsxs)("div",{className:"edit-bar",children:[Object(r.jsxs)("header",{className:"seconde",children:[Object(r.jsx)("h3",{children:"Upload image"}),Object(r.jsx)("button",{onClick:e.toggleAddImg,children:"x"})]}),Object(r.jsx)("main",{children:Object(r.jsx)(Le,{addImg:e.addImg})})]})}var Re=function(e){Object(k.a)(a,e);var t=Object(w.a)(a);function a(){var e;Object(x.a)(this,a);for(var r=arguments.length,n=new Array(r),c=0;c<r;c++)n[c]=arguments[c];return(e=t.call.apply(t,[this].concat(n))).state={member:{fullname:""}},e.handleChange=function(t){var a=Object(m.a)({},e.state.member);a[t.target.name]=t.target.value,e.setState({member:a})},e.onAddMembers=function(t){var a=e.props.card,r=Object(m.a)({},a);if(a.members.find((function(e){return e._id===t._id}))){var n=a.members.filter((function(e){return e._id!==t._id}));r.members=n,e.setState({member:{fullname:""}})}else{var c={_id:t._id,fullname:t.fullname,imgUrl:t.imgUrl};r.members=r.members?[].concat(Object(he.a)(r.members),[c]):[c]}e.props.updateCard(r,"added ".concat(e.state.member.fullname)),e.setState({member:{fullname:""}})},e}return Object(y.a)(a,[{key:"render",value:function(){var e=this,t=this.props,a=t.toggleAddMembers,n=t.users,c=t.card;return Object(r.jsxs)("div",{className:"add-members-bar edit-bar",children:[Object(r.jsxs)("header",{className:"seconde",children:[Object(r.jsx)("h3",{children:"Add Members"}),Object(r.jsx)("button",{onClick:a,children:"x"})]}),Object(r.jsxs)("main",{children:[Object(r.jsxs)("label",{children:["Members",Object(r.jsx)("input",{list:"members",name:"fullname",value:this.state.member.fullname,onChange:this.handleChange,autoFocus:!0,autoComplete:"off"})]}),Object(r.jsx)("ul",{children:n.map((function(t){var a,n=(null===(a=c.members)||void 0===a?void 0:a.find((function(e){return e.fullname===t.fullname})))?"alreadyMember":"";return Object(r.jsx)("li",{className:n,value:t.fullname,onClick:function(){e.onAddMembers(t)},children:Object(r.jsxs)("div",{className:"member-item",children:[Object(r.jsx)("div",{className:"user-img",style:{backgroundImage:"url(".concat(t.imgUrl,")")}}),t.fullname]})},t._id)}))})]})]})}}]),a}(n.Component),Ge=Object(i.b)((function(e){return{}}),{})(Re);function Pe(e){var t=function(){var t=Object(v.a)(O.a.mark((function t(){return O.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:try{e.onRemoveCard(e.cardId)}catch(a){console.log(a)}case 1:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return Object(r.jsxs)("form",{className:"edit-bar",onSubmit:t,children:[Object(r.jsxs)("header",{className:"seconde",children:[Object(r.jsx)("h3",{children:" Delete card?"}),Object(r.jsx)("button",{type:"button",onClick:e.toggleDeleteCard,children:"x"})]}),Object(r.jsxs)("main",{children:[Object(r.jsx)("p",{children:"All actions will be removed from the activity feed and you won\u2019t be able to re-open the card. There is no undo."}),Object(r.jsx)("button",{className:"add-btn red",children:"Delete"})]})]})}var Je=function(e){Object(k.a)(a,e);var t=Object(w.a)(a);function a(){var e;Object(x.a)(this,a);for(var r=arguments.length,n=new Array(r),c=0;c<r;c++)n[c]=arguments[c];return(e=t.call.apply(t,[this].concat(n))).state={label:{title:""}},e.handleChange=function(){var t=Object(v.a)(O.a.mark((function t(a){var r,n;return O.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return(r=Object(m.a)({},e.state.label))[a.target.name]=a.target.value,t.next=4,e.setState({label:r});case 4:return(n=Object(m.a)({},e.props.board)).labels=n.labels.map((function(e){return e.id!==r.id?e:r})),t.prev=6,t.next=9,e.props.updateBoard(n);case 9:t.next=14;break;case 11:t.prev=11,t.t0=t.catch(6),console.log(t.t0);case 14:case"end":return t.stop()}}),t,null,[[6,11]])})));return function(e){return t.apply(this,arguments)}}(),e}return Object(y.a)(a,[{key:"componentDidMount",value:function(){var e=Object(m.a)({},this.props.label);this.setState({label:e})}},{key:"render",value:function(){return Object(r.jsxs)("section",{className:"label-palette edit-bar",children:[Object(r.jsxs)("header",{className:"seconde",children:[Object(r.jsx)("h3",{children:"Edit Label"}),Object(r.jsx)("button",{onClick:this.props.toggleEditLabel,children:"x"})]}),Object(r.jsx)("main",{children:Object(r.jsxs)("label",{children:["Title",Object(r.jsx)("input",{type:"text",name:"title",value:this.state.label.title,placeholder:"Enter Title",onChange:this.handleChange,autoComplete:"off",required:!0,autoFocus:!0})]})})]})}}]),a}(n.Component),He=function(e){Object(k.a)(a,e);var t=Object(w.a)(a);function a(){var e;Object(x.a)(this,a);for(var r=arguments.length,n=new Array(r),c=0;c<r;c++)n[c]=arguments[c];return(e=t.call.apply(t,[this].concat(n))).state={isEditLabelShow:!1,labelToEdit:null},e.addLable=function(t){var a=Object(m.a)({},e.props.card);a.labels?a.labels.find((function(e){return e.id===t.id}))?a.labels=a.labels.filter((function(e){return e.id!==t.id})):a.labels.push(t):a.labels=[t];e.props.updateCard(a,"added label")},e.toggleEditLabel=function(){e.setState({isEditLabelShow:!e.state.isEditLabelShow})},e.openEditLabel=function(){var t=Object(v.a)(O.a.mark((function t(a){return O.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.setState({labelToEdit:a});case 2:e.toggleEditLabel();case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e}return Object(y.a)(a,[{key:"render",value:function(){var e=this;return Object(r.jsxs)("section",{className:"label-palette edit-bar",children:[Object(r.jsxs)("header",{className:"seconde",children:[Object(r.jsx)("h3",{children:"Labels"}),Object(r.jsx)("button",{onClick:this.props.toggleLabelPalette,children:"x"})]}),Object(r.jsx)("main",{children:Object(r.jsxs)("ul",{children:[this.props.board.labels.map((function(t){var a,n=(null===(a=e.props.card.labels)||void 0===a?void 0:a.find((function(e){return e.id===t.id})))?"alredyOnCard":"";return Object(r.jsxs)("li",{children:[Object(r.jsxs)("div",{className:"".concat(t.id),onClick:function(){e.addLable(t)},children:[t.title," ",Object(r.jsx)("span",{className:"".concat(n)})]}),Object(r.jsx)("button",{className:"open-edit-label",onClick:function(){e.openEditLabel(t)}})]},t.id)})),this.state.isEditLabelShow&&Object(r.jsx)(Je,{toggleEditLabel:this.toggleEditLabel,label:this.state.labelToEdit,board:this.props.board,updateBoard:this.props.updateBoard})]})})]})}}]),a}(n.Component);function ze(e){var t=e.showingNav,a=e.toggleShowingNav,n=e.card,c=e.updateCard,s=e.board,o=e.updateBoard,i=e.addDeuDate,d=e.users,l=e.addImg,u=e.onRemoveCard,p=function(){a(null)};switch(t){case"labelPalette":var b=Object(r.jsx)(He,{card:n,updateCard:c,board:s,updateBoard:o,toggleLabelPalette:p});break;case"checklist":b=Object(r.jsx)(Se,{card:n,updateCard:c,toggleChecklistBar:p});break;case"cover":b=Object(r.jsx)(Ae,{card:n,updateCard:c,toggleCoverBar:p});break;case"dueTime":b=Object(r.jsx)(Ie,{card:n,updateCard:c,addDeuDate:i,toggleAddDeutime:p});break;case"members":b=Object(r.jsx)(Ge,{card:n,updateCard:c,users:d,toggleAddMembers:p});break;case"delete":b=Object(r.jsx)(Pe,{cardId:n.id,boardId:s._id,onRemoveCard:u,toggleDeleteCard:p});break;case"img":b=Object(r.jsx)(Fe,{card:n,updateCard:c,toggleAddImg:p,addImg:l});break;default:b=Object(r.jsx)("div",{})}return Object(r.jsx)("div",{className:"edit-list",children:b})}var Xe=function(e){Object(k.a)(a,e);var t=Object(w.a)(a);function a(){var e;Object(x.a)(this,a);for(var r=arguments.length,n=new Array(r),c=0;c<r;c++)n[c]=arguments[c];return(e=t.call.apply(t,[this].concat(n))).state={description:{txt:""}},e.handleChange=function(t){var a=Object(m.a)({},e.state.description);a[t.target.name]=t.target.value,e.setState({description:a})},e.onAddDescription=function(){var t=Object(v.a)(O.a.mark((function t(a){var r,n;return O.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a.preventDefault(),r=Object(m.a)({},e.state.description),(n=Object(m.a)({},e.props.card)).description=r.txt,t.prev=4,t.next=7,e.props.updateCard(n);case 7:e.props.toggleAddDescription(),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(4),console.log(t.t0);case 13:case"end":return t.stop()}}),t,null,[[4,10]])})));return function(e){return t.apply(this,arguments)}}(),e}return Object(y.a)(a,[{key:"componentDidMount",value:function(){var e=this.props.card.description?this.props.card.description:"";this.setState({description:{txt:e}})}},{key:"render",value:function(){var e=this.state.description;return Object(r.jsxs)("form",{className:"add-description show",onSubmit:this.onAddDescription,children:[Object(r.jsx)("textarea",{name:"txt",value:e.txt,placeholder:"add a more detailed description...",onChange:this.handleChange}),Object(r.jsx)("button",{className:"add-btn",children:"Add"})]})}}]),a}(n.Component),qe=Object(i.b)((function(e){return{}}),{})(Xe);function We(e){var t=e.isDescriptionShowing,a=e.card,n=e.toggleAddDescription,c=e.updateCard;return Object(r.jsx)("div",{className:"card-img",children:t?Object(r.jsx)(qe,{card:a,toggleAddDescription:n,updateCard:c}):a.description?Object(r.jsxs)("div",{className:"description show",children:[a.description," ",Object(r.jsx)("button",{className:"edit-btn",onClick:n,children:"Edit"})]}):Object(r.jsx)("div",{className:"show description",onClick:n,children:"add a more detailed description..."})})}var Ze=function(e){Object(k.a)(a,e);var t=Object(w.a)(a);function a(){var e;Object(x.a)(this,a);for(var r=arguments.length,n=new Array(r),c=0;c<r;c++)n[c]=arguments[c];return(e=t.call.apply(t,[this].concat(n))).state={board:null,groupId:null,card:null,showingNav:null,isDescriptionShowing:!1},e.loadCard=Object(v.a)(O.a.mark((function t(){var a,r,n,c,s,o;return O.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,a=e.props,r=a.groupId,n=a.cardId,c=a.selectedBoard,t.next=4,e.props.loadBoard(c._id);case 4:s=c.groups.find((function(e){return e.id===r})),o=s.cards.find((function(e){return e.id===n})),e.setState({board:c,groupId:r,card:o}),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(0),console.log(t.t0);case 12:case"end":return t.stop()}}),t,null,[[0,9]])}))),e.updateBoard=function(){var t=Object(v.a)(O.a.mark((function t(a){var r,n,c,s=arguments;return O.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=s.length>1&&void 0!==s[1]?s[1]:"",t.prev=1,n=e.updateCard(a),r&&(c=e.createActivity(r),n.activities.unshift(c)),t.next=6,e.props.updateBoard(n);case 6:t.next=11;break;case 8:t.prev=8,t.t0=t.catch(1),console.log("err in updateCard",t.t0);case 11:case"end":return t.stop()}}),t,null,[[1,8]])})));return function(e){return t.apply(this,arguments)}}(),e.updateCard=function(t){return Object(m.a)(Object(m.a)({},e.props.selectedBoard),{},{groups:e.props.selectedBoard.groups.map((function(a){return a.id===e.state.groupId&&(a.cards=a.cards.map((function(e){return e.id===t.id?t:e}))),a}))})},e.createActivity=function(t){var a=e.props,r=a.loggedInUser,n=a.card,c=r?{_id:r._id,fullname:r.fullname,imgUrl:r.imgUrl}:{_id:"123",fullname:"guest",imgUrl:"https://res.cloudinary.com/ddgevj2yp/image/upload/v1610989052/avatar-1_kbr5un.jpg"},s={id:n.id,title:n.title};return{id:"a"+q.makeId(),createdAt:Date.now(),txt:t,byMember:c,card:s}},e.toggleShowingNav=function(t){e.setState({showingNav:t})},e.toggleAddDescription=function(){e.setState({isDescriptionShowing:!e.state.isDescriptionShowing})},e.addDeuDate=function(t){var a=Object(m.a)({},e.props.card);a.duedate=t,e.updateBoard(a,"added due date")},e.addImg=function(t){var a=Object(m.a)({},e.props.card);a.img=t,e.updateBoard(a,"added img")},e.stopProg=function(e){e.stopPropagation()},e}return Object(y.a)(a,[{key:"componentDidMount",value:function(){var e=Object(v.a)(O.a.mark((function e(){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{this.loadCard(),this.props.loadUsers()}catch(t){console.log(t)}case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"componentDidUpdate",value:function(e){this.props.match!==e.match&&this.loadCard()}},{key:"render",value:function(){var e,t,a,n=this,c=this.state.isDescriptionShowing,s=this.props,o=s.card,i=s.users,d=s.toggleCardEdit,l=s.onRemoveCard,u=s.selectedBoard;if(!o)return Object(r.jsx)("div",{});var p=(null===(e=o.labels)||void 0===e?void 0:e.length)>0,b=o.duedate,h=(null===(t=o.members)||void 0===t?void 0:t.length)>0,j=(null===(a=o.style)||void 0===a?void 0:a.coverType)?"top t".concat(o.style.bgColor):"",g=o.img;return Object(r.jsx)("div",{className:"screen",onClick:d,children:Object(r.jsxs)("section",{className:"card-edit ".concat(j),onClick:function(e){n.stopProg(e)},children:[Object(r.jsxs)("header",{className:"edit-header",children:[Object(r.jsx)("button",{className:"close",onClick:d}),Object(r.jsx)("h1",{className:"title-sign",children:o.title})]}),Object(r.jsxs)("div",{className:"edit-container",children:[Object(r.jsxs)("main",{children:[Object(r.jsxs)("div",{className:"nav-mini-show show flex ",children:[p&&Object(r.jsx)(be,{labels:o.labels,card:o,updateCard:this.updateBoard}),b&&Object(r.jsx)(ve,{duedate:o.duedate,card:o,updateCard:this.updateBoard}),h&&Object(r.jsx)(ye,{members:o.members,card:o,isBig:!0,updateCard:this.updateBoard})]}),Object(r.jsx)("h4",{className:"description-sign",children:"Description "}),Object(r.jsx)(We,{isDescriptionShowing:c,card:o,toggleAddDescription:this.toggleAddDescription,updateCard:this.updateBoard}),Object(r.jsx)("p",{children:o.description&&""}),g&&Object(r.jsx)(xe,{img:o.img,card:o,updateCard:this.updateBoard}),Object(r.jsx)(Oe,{checklists:o.checklists,card:o,updateCard:this.updateBoard}),Object(r.jsx)(Ce,{activities:u.activities,card:o,updateCard:this.updateBoard})]}),Object(r.jsx)(ze,{showingNav:this.state.showingNav,toggleShowingNav:this.toggleShowingNav,card:o,updateCard:this.updateBoard,board:u,updateBoard:this.props.updateBoard,addDeuDate:this.addDeuDate,users:i,addImg:this.addImg,onRemoveCard:l}),Object(r.jsx)(ue,{toggleShowingNav:this.toggleShowingNav,card:o,toggleLabelPalette:this.toggleLabelPalette,toggleChecklistBar:this.toggleChecklistBar,toggleCoverBar:this.toggleCoverBar,toggleAddDeutime:this.toggleAddDeutime,toggleAddImg:this.toggleAddImg,toggleAddMembers:this.toggleAddMembers,toggleDeleteCard:this.toggleDeleteCard})]})]})})}}]),a}(n.Component),Ke={loadBoard:re,updateBoard:ne,loadUsers:le},Ve=Object(i.b)((function(e){return{selectedBoard:e.boardModule.selectedBoard,users:e.userModule.users,loggedInUser:e.userModule.loggedInUser}}),Ke)(Ze),Ye=a(39);function Qe(e){var t=0,a=0;return e.checklists.forEach((function(e){e.todos.forEach((function(e){!0===e.isDone&&t++,a++}))})),Object(r.jsxs)("span",{className:"checklistSign sign",children:[" ","".concat(t," / ").concat(a)," "]})}function $e(e){var t=e.card,a="";switch(new Date(t.duedate).getMonth()+1){case 1:a="Jan";break;case 2:a="Feb";break;case 3:a="Mar";break;case 4:a="Apr";break;case 5:a="May";break;case 6:a="Jun";break;case 7:a="Jul";break;case 8:a="Aug";break;case 9:a="Sep";break;case 10:a="Oct";break;case 11:a="Nov";break;case 12:a="Dec"}var n=t.duedate.substring(8,10),c=new Date(t.duedate)-Date.now()<864e5?"urgent":"";return Object(r.jsx)("span",{className:"card-duedate-show",children:Object(r.jsx)("span",{className:"duetime-fa duetime-fa-min ".concat(c," "),children:" ".concat(a," ").concat(n)})})}var et=function(e){Object(k.a)(a,e);var t=Object(w.a)(a);function a(){var e;Object(x.a)(this,a);for(var r=arguments.length,n=new Array(r),c=0;c<r;c++)n[c]=arguments[c];return(e=t.call.apply(t,[this].concat(n))).state={isCardEtidShow:!1},e.onRemoveCard=function(t){console.log("cardId to remove",t),e.props.removeCard(t,e.props.groupId,e.props.selectedBoard)},e.toggleCardEdit=function(){e.setState({isCardEtidShow:!e.state.isCardEtidShow})},e}return Object(y.a)(a,[{key:"render",value:function(){var e,t,a=this,n=this.props.card,c=this.state.isCardEtidShow,s="full"===(null===(e=n.style)||void 0===e?void 0:e.coverType)?"full ".concat(n.style.bgColor):"",o="top"===(null===(t=n.style)||void 0===t?void 0:t.coverType)&&n.style.bgColor?"top t".concat(n.style.bgColor):"";return Object(r.jsx)(Ye.b,{draggableId:String(n.id),index:this.props.index,direction:"horizontal",type:"card",children:function(e){return Object(r.jsx)("li",Object(m.a)(Object(m.a)(Object(m.a)({},e.draggableProps),e.dragHandleProps),{},{ref:e.innerRef,className:"default-empty"!==n.title?"":"list-preview-empty",children:Object(r.jsxs)("article",{className:"default-empty"!==n.title?"card-preview ".concat(s," ").concat(o):"card-preview-empty",children:[Object(r.jsx)("button",{className:"edit-s",onClick:a.toggleCardEdit}),n.labels&&Object(r.jsx)(de,{labels:n.labels}),Object(r.jsx)("p",{onClick:a.toggleCardEdit,children:n.title}),n.img&&Object(r.jsx)(xe,{card:n}),Object(r.jsxs)("nav",{className:"flex space-between flex-end",children:[Object(r.jsxs)("span",{children:[n.description?Object(r.jsx)("span",{className:"descriptionSign sign"}):"",n.checklists&&n.checklists.length>0?Object(r.jsx)(Qe,{checklists:n.checklists}):"",n.duedate?Object(r.jsx)($e,{card:n}):""]}),Object(r.jsx)("span",{children:n.members?Object(r.jsx)(ye,{members:n.members}):""})]}),c&&Object(r.jsx)(Ve,{card:n,groupId:a.props.groupId,toggleCardEdit:a.toggleCardEdit,onRemoveCard:a.onRemoveCard})]})}),n.id)}})}}]),a}(n.Component),tt={removeCard:function(e,t,a){return function(){var r=Object(v.a)(O.a.mark((function r(n){var c,s,o,i;return O.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,c=JSON.parse(JSON.stringify(a)),s=c.groups.findIndex((function(e){return e.id===t})),o=c.groups[s].cards.filter((function(t){return t.id!==e})),c.groups[s].cards=o,r.next=7,W.updateBoard(c);case 7:i=r.sent,n({type:"SET_BOARD",board:i}),r.next=14;break;case 11:r.prev=11,r.t0=r.catch(0),console.log("BoardActions: err in removeGroup",r.t0);case 14:case"end":return r.stop()}}),r,null,[[0,11]])})));return function(e){return r.apply(this,arguments)}}()}},at=Object(i.b)((function(e){return{selectedBoard:e.boardModule.selectedBoard}}),tt)(et);function rt(e){return Object(r.jsx)(Ye.c,{droppableId:e.groupId,type:"card",children:function(t){return Object(r.jsxs)("ul",Object(m.a)(Object(m.a)({className:"card-list"},t.droppableProps),{},{ref:t.innerRef,children:[e.cards.map((function(t,a){return Object(r.jsx)(at,{card:t,groupId:e.groupId,index:a},t.id)})),t.placeholder]}))}})}var nt=function(e){Object(k.a)(a,e);var t=Object(w.a)(a);function a(){var e;Object(x.a)(this,a);for(var r=arguments.length,n=new Array(r),c=0;c<r;c++)n[c]=arguments[c];return(e=t.call.apply(t,[this].concat(n))).state={title:""},e.handleChange=function(t){var a=t.target.value,r=t.target.name;e.setState(Object(ce.a)({},r,a))},e.onSubmit=function(){var t=Object(v.a)(O.a.mark((function t(a){return O.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a.preventDefault(),e.state.title){t.next=3;break}return t.abrupt("return");case 3:return t.next=5,e.props.addCard(e.state.title,e.props.group.id,e.props.selectedBoard);case 5:e.props.toggleAddCardMode();case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.onCancelAdd=function(t){t.preventDefault(),e.props.toggleAddCardMode()},e}return Object(y.a)(a,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){return Object(r.jsx)("div",{className:"add-new-card",children:Object(r.jsxs)("form",{onSubmit:this.onSubmit,children:[Object(r.jsx)("textarea",{placeholder:"Enter a title for this card...",type:"text",onChange:this.handleChange,value:this.state.title,name:"title",autoComplete:"off"}),Object(r.jsx)("button",{className:"save-btn",children:"Add Card"}),Object(r.jsx)("button",{className:"cancel-btn",onClick:this.onCancelAdd})]})})}}]),a}(n.Component),ct={addCard:function(e,t,a){return function(){var r=Object(v.a)(O.a.mark((function r(n){var c,s,o,i,d;return O.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,c=W.makeCard(e),r.next=4,W.makeActivity("created new card ".concat(c.title));case 4:return s=r.sent,o=JSON.parse(JSON.stringify(a)),i=o.groups.findIndex((function(e){return e.id===t})),o.groups[i].cards.push(c),o.activities.unshift(s),r.next=11,W.updateBoard(o);case 11:d=r.sent,n({type:"SET_BOARD",board:d}),r.next=18;break;case 15:r.prev=15,r.t0=r.catch(0),console.log("BoardActions: err in addCard",r.t0);case 18:case"end":return r.stop()}}),r,null,[[0,15]])})));return function(e){return r.apply(this,arguments)}}()}},st=Object(i.b)((function(e){return{selectedBoard:e.boardModule.selectedBoard}}),ct)(nt);function ot(e){return Object(r.jsxs)("section",{className:"edit-bar",children:[Object(r.jsxs)("header",{className:"seconde",children:[Object(r.jsx)("h3",{children:" Delete list?"}),Object(r.jsx)("button",{onClick:e.toggleDeleteBar,children:"x"})]}),Object(r.jsxs)("main",{children:[Object(r.jsx)("p",{children:"All actions will be removed from the activity feed and you won\u2019t be able to re-open the list. There is no undo."}),Object(r.jsx)("button",{className:"add-btn red",onClick:function(){return e.onRemoveGroup(e.group.id,e.group.title)},children:"Delete"})]})]})}var it=function(e){Object(k.a)(a,e);var t=Object(w.a)(a);function a(){var e;Object(x.a)(this,a);for(var r=arguments.length,n=new Array(r),c=0;c<r;c++)n[c]=arguments[c];return(e=t.call.apply(t,[this].concat(n))).state={isOnAddCardMode:!1,isDeleteBarShow:!1},e.toggleDeleteBar=function(){e.setState({isDeleteBarShow:!e.state.isDeleteBarShow})},e.toggleAddCardMode=function(){e.setState({isOnAddCardMode:!e.state.isOnAddCardMode})},e}return Object(y.a)(a,[{key:"render",value:function(){var e=this.props.onRemoveGroup,t=this.state.isDeleteBarShow,a=this.state.isOnAddCardMode,n=this.props.group;return Object(r.jsx)(c.a.Fragment,{children:Object(r.jsxs)("nav",{className:"edit-group-container",children:[a?Object(r.jsx)(st,{group:n,toggleAddCardMode:this.toggleAddCardMode}):Object(r.jsx)("button",{onClick:this.toggleAddCardMode,children:"Add another card..."}),t?Object(r.jsx)(ot,{group:n,toggleDeleteBar:this.toggleDeleteBar,onRemoveGroup:e}):Object(r.jsx)("button",{onClick:this.toggleDeleteBar,children:"Delete this list..."})]})})}}]),a}(n.Component),dt=Object(i.b)((function(e){return{selectedBoard:e.boardModule.selectedBoard}}),{})(it),lt=function(e){Object(k.a)(a,e);var t=Object(w.a)(a);function a(){var e;Object(x.a)(this,a);for(var r=arguments.length,n=new Array(r),c=0;c<r;c++)n[c]=arguments[c];return(e=t.call.apply(t,[this].concat(n))).state={isOnAddCardMode:!1,isEditMode:!1,isEditGroupNavShow:!1,title:"",groupHeight:0},e.onRemoveGroup=function(){var t=Object(v.a)(O.a.mark((function t(a,r){var n,c,s,o;return O.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=JSON.parse(JSON.stringify(e.props.selectedBoard)),c="removed list titled ".concat(r),s=n.groups.filter((function(e){return e.id!==a})),n.groups=s,t.next=6,e.props.updateBoard(n,c);case 6:return o=t.sent,t.abrupt("return",o);case 8:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}(),e.toggleEditMode=function(){e.setState({isEditMode:!e.state.isEditMode})},e.toggleAddCardMode=function(){e.setState({isOnAddCardMode:!e.state.isOnAddCardMode})},e.toggleEditGroupNav=function(){e.setState({isEditGroupNavShow:!e.state.isEditGroupNavShow})},e}return Object(y.a)(a,[{key:"componentDidMount",value:function(){this.setState({groupHeight:document.body.clientHeight})}},{key:"render",value:function(){var e=this,t=this.state,a=t.isEditMode,n=t.isOnAddCardMode,c=t.isEditGroupNavShow,s=this.props.group;return Object(r.jsx)(Ye.b,{draggableId:s.id,index:this.props.index,children:function(t){return Object(r.jsx)("li",Object(m.a)(Object(m.a)(Object(m.a)({className:"group"},t.draggableProps),t.dragHandleProps),{},{ref:t.innerRef,children:Object(r.jsx)("article",{className:"group-preview",children:Object(r.jsxs)("div",{className:"group-wraper",children:[Object(r.jsxs)("header",{children:[a?Object(r.jsx)(ie,{group:s,toggleEditMode:e.toggleEditMode}):Object(r.jsxs)("p",{onClick:e.toggleEditMode,children:[s.title," "]}),Object(r.jsx)("button",{className:"menu-group",onClick:function(){return e.toggleEditGroupNav(s.id)}}),c&&Object(r.jsx)(dt,{group:s,onRemoveGroup:e.onRemoveGroup})]}),Object(r.jsx)("main",{style:{maxHeight:"".concat(e.state.groupHeight-260,"px")},children:Object(r.jsx)("div",{className:"main-group-wraper",children:s.cards&&Object(r.jsx)(rt,{groupId:s.id,cards:s.cards})})}),n?Object(r.jsx)(st,{group:s,toggleAddCardMode:e.toggleAddCardMode}):Object(r.jsx)("p",{className:"add-another-card",onClick:e.toggleAddCardMode,children:" Add another card"})]})})}))}})}}]),a}(n.Component),ut={updateBoard:ne},pt=Object(i.b)((function(e){return{selectedBoard:e.boardModule.selectedBoard}}),ut)(lt),bt=function(e){Object(k.a)(a,e);var t=Object(w.a)(a);function a(){var e;Object(x.a)(this,a);for(var r=arguments.length,n=new Array(r),c=0;c<r;c++)n[c]=arguments[c];return(e=t.call.apply(t,[this].concat(n))).state={title:""},e.handleChange=function(t){var a=t.target.value,r=t.target.name;e.setState(Object(ce.a)({},r,a))},e.onSubmit=function(){var t=Object(v.a)(O.a.mark((function t(a){return O.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a.preventDefault(),e.state.title){t.next=3;break}return t.abrupt("return");case 3:return t.next=5,e.props.addGroup(e.state.title,e.props.selectedBoard);case 5:e.setState({title:""}),e.props.toggleAddGroupMode();case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.onCancelAdd=function(t){t.preventDefault(),e.props.toggleAddGroupMode()},e}return Object(y.a)(a,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){return Object(r.jsx)("div",{className:"add-new-group",children:Object(r.jsxs)("form",{className:"add-new-wraper",onSubmit:this.onSubmit,children:[Object(r.jsx)("input",{className:"add-another-group",placeholder:"Add another list",type:"text",onChange:this.handleChange,value:this.state.title,name:"title",autoComplete:"off"}),Object(r.jsx)("button",{className:"save-group-btn",children:"Add List"}),Object(r.jsx)("button",{className:"cancel-group-btn",onClick:this.onCancelAdd})]})})}}]),a}(n.Component),ht={addGroup:function(e,t){return function(){var a=Object(v.a)(O.a.mark((function a(r){var n,c,s,o;return O.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,n=W.makeGroup(e),a.next=4,W.makeActivity("created new list ".concat(n.title));case 4:return c=a.sent,(s=JSON.parse(JSON.stringify(t))).groups.push(n),s.activities.unshift(c),a.next=10,W.updateBoard(s);case 10:o=a.sent,r({type:"SET_BOARD",board:o}),a.next=17;break;case 14:a.prev=14,a.t0=a.catch(0),console.log("BoardActions: err in addGroup",a.t0);case 17:case"end":return a.stop()}}),a,null,[[0,14]])})));return function(e){return a.apply(this,arguments)}}()}},jt=Object(i.b)((function(e){return{selectedBoard:e.boardModule.selectedBoard}}),ht)(bt),gt=function(e){Object(k.a)(a,e);var t=Object(w.a)(a);function a(){var e;Object(x.a)(this,a);for(var r=arguments.length,n=new Array(r),c=0;c<r;c++)n[c]=arguments[c];return(e=t.call.apply(t,[this].concat(n))).state={isOnAddGroupMode:!1},e.toggleAddGroupMode=function(){e.setState({isOnAddGroupMode:!e.state.isOnAddGroupMode})},e}return Object(y.a)(a,[{key:"render",value:function(){var e=this,t=this.state.isOnAddGroupMode;return Object(r.jsx)(Ye.a,{onDragEnd:this.props.onDragEnd,children:Object(r.jsxs)("section",{className:"group-list-container",children:[Object(r.jsx)(Ye.c,{droppableId:"moveGroups",direction:"horizontal",type:"group",children:function(t){return Object(r.jsxs)("ul",Object(m.a)(Object(m.a)({className:"group-list clean-list"},t.droppableProps),{},{ref:t.innerRef,children:[e.props.groups.map((function(e,t){return Object(r.jsx)(pt,{group:e,index:t},e.id)})),t.placeholder]}))}}),t?Object(r.jsx)(jt,{boardId:this.props.boardId,toggleAddGroupMode:this.toggleAddGroupMode}):Object(r.jsx)("p",{className:"add-another-list",onClick:this.toggleAddGroupMode,children:" Add another list"})]})})}}]),a}(n.Component),mt=function(e){Object(k.a)(a,e);var t=Object(w.a)(a);function a(){var e;Object(x.a)(this,a);for(var r=arguments.length,n=new Array(r),c=0;c<r;c++)n[c]=arguments[c];return(e=t.call.apply(t,[this].concat(n))).state={title:""},e.handleChange=function(t){var a=t.target.value,r=t.target.name;e.setState(Object(ce.a)({},r,a))},e.onSubmit=function(){var t=Object(v.a)(O.a.mark((function t(a){var r,n;return O.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a.preventDefault(),r=e.state.title){t.next=4;break}return t.abrupt("return");case 4:return n=Object(m.a)(Object(m.a)({},e.props.selectedBoard),{},{title:r}),t.next=7,e.props.updateBoard(n,"changed board title to ".concat(r));case 7:e.props.toggleEditMode();case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e}return Object(y.a)(a,[{key:"componentDidMount",value:function(){var e=this.props.selectedBoard.title;this.setState({title:e})}},{key:"render",value:function(){return Object(r.jsx)("div",{className:"edit-board-title",children:Object(r.jsxs)("form",{onSubmit:this.onSubmit,children:[Object(r.jsx)("input",{className:"new-title-input",placeholder:"Board Title",type:"text",onChange:this.handleChange,value:this.state.title,name:"title",autoComplete:"off",autoFocus:!0}),Object(r.jsx)("button",{className:"add-btn",children:"Save"})]})})}}]),a}(n.Component),ft={updateBoard:ne},Ot=Object(i.b)((function(e){return{selectedBoard:e.boardModule.selectedBoard}}),ft)(mt),vt=function(e){Object(k.a)(a,e);var t=Object(w.a)(a);function a(){var e;Object(x.a)(this,a);for(var r=arguments.length,n=new Array(r),c=0;c<r;c++)n[c]=arguments[c];return(e=t.call.apply(t,[this].concat(n))).state={isEditMode:!1},e.toggleEditMode=function(){e.setState({isEditMode:!e.state.isEditMode})},e}return Object(y.a)(a,[{key:"render",value:function(){var e=this.state.isEditMode,t=this.props.selectedBoard;return Object(r.jsxs)("div",{className:"about-board-container side-menu-sub-item",children:[Object(r.jsxs)("header",{children:[Object(r.jsx)("h1",{children:"About this board"}),Object(r.jsx)("button",{className:"close-menu",onClick:this.props.toggleAboutBoard,children:"x"})]}),Object(r.jsxs)("main",{className:"menu-container",children:[Object(r.jsxs)("section",{children:[Object(r.jsx)("p",{className:"menu-item made-by",children:" Made by "}),Object(r.jsxs)("div",{className:"flex align-center",children:[Object(r.jsx)("div",{className:"user-img sub inline-block",style:{backgroundImage:"url(".concat(t.createdBy.imgUrl,")")}}),Object(r.jsxs)("span",{children:[t.createdBy.username," "]})]})]}),Object(r.jsxs)("section",{children:[Object(r.jsxs)("p",{className:"menu-item board-name",children:["Board name ",Object(r.jsx)("span",{className:"board-name-edit",children:"click to edit"})]}),e?Object(r.jsx)(Ot,{toggleEditMode:this.toggleEditMode}):Object(r.jsxs)("p",{className:"board-name-edit",onClick:this.toggleEditMode,children:[" ",t.title," "]})]})]})]})}}]),a}(n.Component),xt=Object(i.b)((function(e){return{selectedBoard:e.boardModule.selectedBoard}}),{})(vt),yt=function(e){Object(k.a)(a,e);var t=Object(w.a)(a);function a(){var e;Object(x.a)(this,a);for(var r=arguments.length,n=new Array(r),c=0;c<r;c++)n[c]=arguments[c];return(e=t.call.apply(t,[this].concat(n))).state={bgurl:""},e.onChooseBackground=function(t){e.setState({bgurl:t},(function(){e.onSubmit()}))},e.onSubmit=Object(v.a)(O.a.mark((function t(){var a;return O.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return(a=JSON.parse(JSON.stringify(e.props.selectedBoard))).style.bgurl=e.state.bgurl,t.next=4,e.props.updateBoard(a,"changed background");case 4:case"end":return t.stop()}}),t)}))),e.onCancelAdd=function(t){t.preventDefault(),e.props.toggleNewBoard()},e.stopPropagation=function(e){e.stopPropagation()},e}return Object(y.a)(a,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){var e=this;return Object(r.jsxs)("section",{className:"side-menu-sub-item ",onClick:this.stopPropagation,children:[Object(r.jsxs)("header",{children:[Object(r.jsx)("h3",{children:"Choose background"}),Object(r.jsx)("button",{className:"close-menu",onClick:this.props.toggleChangeBackground,children:"x"})]}),Object(r.jsx)("main",{className:"add-board-backgrounds",children:[{id:"bg101",bgurl:"https://cdn.pixabay.com/photo/2020/04/11/18/24/star-5031540_1280.jpg"},{id:"bg102",bgurl:"https://cdn.pixabay.com/photo/2016/11/29/08/00/abstract-1868269_1280.jpg"},{id:"bg103",bgurl:"https://cdn.pixabay.com/photo/2019/03/23/20/54/bamboo-4076262_1280.jpg"},{id:"bg104",bgurl:"https://cdn.pixabay.com/photo/2013/07/21/13/00/rose-165819_1280.jpg"},{id:"bg105",bgurl:"https://cdn.pixabay.com/photo/2014/09/14/18/04/dandelion-445228_1280.jpg"},{id:"bg106",bgurl:"https://cdn.pixabay.com/photo/2017/05/11/11/15/workplace-2303851_1280.jpg"},{id:"bg107",bgurl:"https://cdn.pixabay.com/photo/2016/02/19/11/33/backround-1209772_1280.jpg"},{id:"bg108",bgurl:"https://cdn.pixabay.com/photo/2017/08/15/15/37/pen-2644392_1280.jpg"},{id:"bg109",bgurl:"https://cdn.pixabay.com/photo/2018/01/11/21/27/laptop-3076957_1280.jpg"},{id:"bg110",bgurl:"https://cdn.pixabay.com/photo/2018/05/31/13/13/rain-3443977_1280.jpg"},{id:"bg111",bgurl:"https://cdn.pixabay.com/photo/2014/04/05/11/38/bokeh-316425_1280.jpg"},{id:"bg112",bgurl:"https://cdn.pixabay.com/photo/2013/07/25/13/01/stones-167089_1280.jpg"}].map((function(t){return Object(r.jsx)("div",{className:"backgrounds-tumbs",style:{backgroundImage:"url(".concat(t.bgurl,")")},onClick:function(){return e.onChooseBackground(t.bgurl)},children:Object(r.jsx)("div",{className:"plus",children:"+"})},t.id)}))})]})}}]),a}(n.Component),kt={updateBoard:ne},wt=Object(i.b)((function(e){return{selectedBoard:e.boardModule.selectedBoard}}),kt)(yt);function Ct(e){return Object(r.jsxs)("li",{className:"activity-preview flex align-center",children:[Object(r.jsx)("div",{className:"user-img inline-block",style:{backgroundImage:"url(".concat(e.activity.byMember.imgUrl,")")}}),Object(r.jsxs)("div",{className:"txt",children:[Object(r.jsxs)("p",{children:[" ",Object(r.jsx)("span",{className:"user-name",children:e.activity.byMember.fullname})," ",e.activity.txt,"  "]}),Object(r.jsx)(ke,{time:e.activity.createdAt})]})]})}function Nt(e){return Object(r.jsxs)("section",{className:"activity-container",children:[Object(r.jsx)("p",{className:"menu-item menu-activity",children:"Activity Log"}),Object(r.jsx)("ul",{className:"activity-list",children:e.activities.map((function(e){return Object(r.jsx)(Ct,{activity:e},e.id)}))})]})}var St=function(e){Object(k.a)(a,e);var t=Object(w.a)(a);function a(){var e;Object(x.a)(this,a);for(var r=arguments.length,n=new Array(r),c=0;c<r;c++)n[c]=arguments[c];return(e=t.call.apply(t,[this].concat(n))).state={isAboutBoardShown:!1,isChangeBackgroundShown:!1,isBoardAnalysisShown:!1,isDeleteBoardShown:!1},e.toggleAboutBoard=function(){e.setState({isAboutBoardShown:!e.state.isAboutBoardShown})},e.toggleChangeBackground=function(){e.setState({isChangeBackgroundShown:!e.state.isChangeBackgroundShown})},e.toggleBoardAnalysis=function(){e.setState({isBoardAnalysisShown:!e.state.isBoardAnalysisShown})},e.toggleDeleteBoard=function(){e.setState({isDeleteBoardShown:!e.state.isDeleteBoardShown})},e}return Object(y.a)(a,[{key:"componentDidMount",value:function(){var e=Object(v.a)(O.a.mark((function e(){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.state.isAboutBoardShown,t=this.state.isChangeBackgroundShown,a=this.props,n=a.selectedBoard,c=a.classname?"open":"";return Object(r.jsxs)("section",{className:"board-side-menu ".concat(c),children:[Object(r.jsxs)("header",{className:"menu-header",children:[Object(r.jsx)("h1",{children:"Menu"}),Object(r.jsx)("button",{className:"close-menu",onClick:this.props.toggleSideMenu,children:"X"}),Object(r.jsx)("hr",{})]}),Object(r.jsxs)("div",{className:"menu-container",children:[e?Object(r.jsx)(xt,{toggleAboutBoard:this.toggleAboutBoard,board:n}):Object(r.jsxs)("div",{className:"menu-item",onClick:this.toggleAboutBoard,children:[" ",Object(r.jsx)("p",{className:"menu-about",children:" About this board"})]}),t?Object(r.jsx)(wt,{toggleChangeBackground:this.toggleChangeBackground}):Object(r.jsx)("p",{className:"menu-item menu-background",onClick:this.toggleChangeBackground,children:" Change Background"}),Object(r.jsx)("hr",{}),n.activities&&Object(r.jsx)(Nt,{activities:n.activities})]})]})}}]),a}(n.Component),Bt=Object(i.b)((function(e){return{selectedBoard:e.boardModule.selectedBoard}}),{})(St),At=function(e){Object(k.a)(a,e);var t=Object(w.a)(a);function a(){var e;Object(x.a)(this,a);for(var r=arguments.length,n=new Array(r),c=0;c<r;c++)n[c]=arguments[c];return(e=t.call.apply(t,[this].concat(n))).state={userImgStyle:{backgroundImage:"url(https://res.cloudinary.com/ddgevj2yp/image/upload/v1610989052/avatar-1_kbr5un.jpg"}},e}return Object(y.a)(a,[{key:"componentDidMount",value:function(){if(this.props.loggedInUser){var e=this.props.loggedInUser.imgUrl,t={backgroundImage:"url(".concat(e,")")};this.setState({userImgStyle:t})}}},{key:"render",value:function(){var e=this.props,t=e.selectedBoard,a=e.toggleSideMenu,n=e.toggleDashboard;return Object(r.jsxs)("div",{className:"main-header",children:[Object(r.jsxs)("header",{className:"app-header flex space-between align-center",children:[Object(r.jsxs)("nav",{children:[Object(r.jsx)(d.b,{to:"/",className:"header-home"}),Object(r.jsx)(d.b,{to:"/board",className:"header-board",children:" Boards "})]}),Object(r.jsx)("h3",{className:"header-logo",children:"TASX"}),Object(r.jsxs)("nav",{className:"navbar-links flex space-between align-center",children:[Object(r.jsx)(d.b,{to:"/home",className:"header-about-us normal-media",children:"About Us"}),Object(r.jsx)(d.b,{to:"/login",className:"user-img",style:this.state.userImgStyle})]})]}),Object(r.jsx)("header",{className:"narrow-media app-header flex space-between align-center",children:Object(r.jsx)(d.b,{to:"/home",className:"header-about-us",children:"About Us"})}),Object(r.jsxs)("header",{className:"app-header board-header flex space-between align-center",children:[Object(r.jsx)("nav",{children:Object(r.jsx)("h5",{children:t.title})}),Object(r.jsxs)("nav",{className:"navbar-links  ",children:[Object(r.jsx)("button",{className:"header-invite",onClick:n,children:"Statistics"}),Object(r.jsx)("button",{className:"header-show-menu",onClick:a,children:" Show Menu"})]})]})]})}}]),a}(n.Component),Dt=Object(i.b)((function(e){return{selectedBoard:e.boardModule.selectedBoard,loggedInUser:e.userModule.loggedInUser}}),{})(At),Mt=a(41);function Et(e){var t=e.board.groups.reduce((function(e,t){var a;return null===(a=t.cards)||void 0===a||a.forEach((function(t){var a;null===(a=t.members)||void 0===a||a.forEach((function(t){var a=e[t.fullname]+1||1;e[t.fullname]=a}))})),e}),{}),a={labels:Object.keys(t),datasets:[{data:Object.values(t),backgroundColor:["#61BD4F","#F2D600","#FF9F1A","#EB5A46","#C377E0","#0079BF"],hoverBackgroundColor:["#61BD4F","#F2D600","#FF9F1A","#EB5A46","#C377E0","#0079BF"],fontColor:"#ffff"}]};return Object(r.jsx)("section",{style:{width:"40%"},children:Object(r.jsx)(Mt.Pie,{data:a,options:{title:{display:!0,text:"Total Cards Per Member",fontColor:"#ffff",fontSize:"14"},legend:{display:!1},ticks:{precision:0},scales:{yAxes:[{ticks:{fontColor:"#ffff",beginAtZero:!0,userCallback:function(e,t,a){if(Math.floor(e)===e)return e}}}],xAxes:[{ticks:{fontColor:"#ffff"}}]}}})})}function It(e){var t=e.board.groups.reduce((function(e,t){return e[t.title]=t.cards.length,e}),{}),a={labels:Object.keys(t),datasets:[{label:"tasks",data:Object.values(t),backgroundColor:["#61BD4F","#F2D600","#FF9F1A","#EB5A46","#C377E0","#0079BF"],hoverBackgroundColor:["#61BD4F","#F2D600","#FF9F1A","#EB5A46","#C377E0","#0079BF"]}]};return Object(r.jsx)("section",{style:{width:"40%"},children:Object(r.jsx)(Mt.HorizontalBar,{data:a,options:{title:{display:!0,text:"Total Cards Per List",fontColor:"#ffff",fontSize:"14"},legend:{display:!1},ticks:{precision:0},scales:{yAxes:[{ticks:{fontColor:"#ffff"}}],xAxes:[{ticks:{fontColor:"#ffff",beginAtZero:!0}}]}}})})}function Ut(e){var t=Date.now(),a=e.board.groups.reduce((function(e,a){var r,n=0;return null===(r=a.cards)||void 0===r||r.forEach((function(r){n++;var c=(t-r.createdAt)/36e3/1e3;e[a.title]=Math.round(c/n)})),e}),{}),n={labels:Object.keys(a),datasets:[{data:Object.values(a),backgroundColor:["#0079BF"],hoverBackgroundColor:["#0079BF"]}]};return Object(r.jsx)("section",{style:{width:"40%"},children:Object(r.jsx)(Mt.Line,{data:n,options:{title:{display:!0,text:"Average Lifetime Of Cards Per List In Days",fontColor:"#ffff",fontSize:"14"},legend:{display:!1},ticks:{precision:0},scales:{yAxes:[{ticks:{fontColor:"#ffff",beginAtZero:!0,userCallback:function(e,t,a){if(Math.floor(e)===e)return e}}}],xAxes:[{ticks:{fontColor:"#ffff"}}]}}})})}function Tt(e){var t=[],a=[];e.board.groups.forEach((function(e){var r;null===(r=e.cards)||void 0===r||r.forEach((function(e){var r;null===(r=e.labels)||void 0===r||r.forEach((function(e){a[e.id]?a[e.id]++:a[e.id]=1,t[e.id]=e.title}))}))}));var n={labels:Object.values(t),datasets:[{label:"tasks",data:Object.values(a),backgroundColor:Object.keys(t),hoverBackgroundColor:Object.keys(t)}]};return Object(r.jsx)("section",{style:{width:"40%"},children:Object(r.jsx)(Mt.Bar,{data:n,options:{title:{display:!0,text:"Labels Usage",fontColor:"#ffff",fontSize:"14"},legend:{display:!1},ticks:{precision:0},scales:{yAxes:[{ticks:{fontColor:"#ffff",beginAtZero:!0,userCallback:function(e,t,a){if(Math.floor(e)===e)return e}}}],xAxes:[{ticks:{fontColor:"#ffff"}}]}}})})}var _t=function(e){Object(k.a)(a,e);var t=Object(w.a)(a);function a(){var e;Object(x.a)(this,a);for(var r=arguments.length,n=new Array(r),c=0;c<r;c++)n[c]=arguments[c];return(e=t.call.apply(t,[this].concat(n))).state={todos:"",cardSum:0},e.todosAndCardsSum=function(){var t=0,a=0,r=0;e.props.selectedBoard.groups.forEach((function(e){var n;null===(n=e.cards)||void 0===n||n.forEach((function(e){r++,e.checklists.forEach((function(e){e.todos.forEach((function(e){t++,e.isDone&&a++}))}))}))})),e.setState({todos:"".concat(a," / ").concat(t),cardSum:r})},e}return Object(y.a)(a,[{key:"componentDidMount",value:function(){this.todosAndCardsSum()}},{key:"render",value:function(){var e=this.props.selectedBoard,t=this.props.toggleDashboard,a=this.state,n=a.todos,c=a.cardSum,s=e.members.length;return Object(r.jsxs)("section",{className:"dashboard",children:[Object(r.jsxs)("header",{children:[Object(r.jsx)("h1",{children:"Board Statistics"}),Object(r.jsx)("button",{className:"close-menu",onClick:t,children:"x"})]}),Object(r.jsxs)("main",{className:"menu-container",children:[Object(r.jsxs)("div",{className:"summery",children:[Object(r.jsxs)("p",{children:[Object(r.jsx)("span",{children:s})," Total members"]}),Object(r.jsxs)("p",{children:[Object(r.jsx)("span",{children:n})," Checked todos"]}),Object(r.jsxs)("p",{children:[Object(r.jsx)("span",{children:c})," Total Cards on board"]})]}),Object(r.jsxs)("div",{className:"data",children:[Object(r.jsx)(Et,{board:e}),Object(r.jsx)(It,{board:e}),Object(r.jsx)(Tt,{board:e}),Object(r.jsx)(Ut,{board:e})]})]})]})}}]),a}(n.Component),Lt=Object(i.b)((function(e){return{selectedBoard:e.boardModule.selectedBoard}}),{})(_t),Ft=function(e){Object(k.a)(a,e);var t=Object(w.a)(a);function a(){var e;Object(x.a)(this,a);for(var r=arguments.length,n=new Array(r),c=0;c<r;c++)n[c]=arguments[c];return(e=t.call.apply(t,[this].concat(n))).state={board:{},isBoardMenuShown:!1,isDashboardShown:!1,filterBy:{title:""}},e.onDragEnd=function(t){var a=t.destination,r=t.source,n=t.draggableId,c=t.type;a&&(a.droppableId===r.droppableId&&a.index===r.index||("group"===c&&e.onDragGroups(r.index,a.index),"card"===c&&e.onDragCards(a,r,n)))},e.onChangeBoard=function(){var t=Object(v.a)(O.a.mark((function t(a){return O.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.props.updateBoardFromSocket(a);case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.onDragGroups=function(){var t=Object(v.a)(O.a.mark((function t(a,r){var n,c;return O.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.props.selectedBoard,c=n.groups.splice(a,1),n.groups.splice(r,0,c[0]),t.next=5,e.props.updateBoard(e.props.selectedBoard);case 5:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}(),e.onDragCards=function(){var t=Object(v.a)(O.a.mark((function t(a,r){var n,c,s,o;return O.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.props.selectedBoard,c=n.groups.findIndex((function(e){return e.id===r.droppableId})),s=n.groups.findIndex((function(e){return e.id===a.droppableId})),o=n.groups[c].cards.splice(r.index,1),n.groups[s].cards.splice(a.index,0,o[0]),t.next=7,e.props.updateBoard(e.props.selectedBoard);case 7:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}(),e.toggleSideMenu=function(){e.setState({isBoardMenuShown:!e.state.isBoardMenuShown})},e.toggleDashboard=function(){e.setState({isDashboardShown:!e.state.isDashboardShown})},e}return Object(y.a)(a,[{key:"componentDidMount",value:function(){var e=Object(v.a)(O.a.mark((function e(){var t;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.props.match.params.id,_.setup(),e.next=4,this.props.loadBoard(t);case 4:_.emit("join board",t),_.on("update board",this.onChangeBoard);case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"componentWillUnmount",value:function(){_.off("update board",this.onChangeBoard),_.terminate()}},{key:"render",value:function(){var e=this.props.selectedBoard,t=this.state,a=t.isBoardMenuShown,n=t.isDashboardShown;if(!e)return Object(r.jsx)("div",{children:"Loading..."});var c=Object(m.a)({},e.style);return Object(r.jsxs)("section",{className:"board-wraper",style:{backgroundImage:"url("+c.bgurl+")",backgroundPosition:"center",backgroundSize:"cover",backgroundRepeat:"no-repeat"},children:[Object(r.jsx)(Dt,{toggleSideMenu:this.toggleSideMenu,toggleDashboard:this.toggleDashboard}),Object(r.jsx)(Bt,{classname:a,toggleSideMenu:this.toggleSideMenu}),e.groups&&Object(r.jsx)(gt,{groups:e.groups,boardId:e._id,onDragEnd:this.onDragEnd}),n&&Object(r.jsx)(Lt,{toggleDashboard:this.toggleDashboard})]})}}]),a}(n.Component),Rt={loadBoard:re,updateBoard:ne,updateBoardFromSocket:function(e){return function(){var t=Object(v.a)(O.a.mark((function t(a){var r;return O.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:try{r=JSON.parse(JSON.stringify(e)),a({type:"SET_BOARD",board:r})}catch(n){console.log("BoardActions: err in updateBoardAfterSocket",n)}case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}},Gt=Object(i.b)((function(e){return{selectedBoard:e.boardModule.selectedBoard,filterBy:e.boardModule.filterBy,users:e.userModule.users,loggedInUser:e.userModule.loggedInUser}}),Rt)(Ft);function Pt(e){var t=e.board,a={boardStyle:Object(m.a)({},t.style)};return Object(r.jsx)(d.b,{to:"/board/".concat(t._id),children:Object(r.jsx)("li",{className:"board-preview",style:{backgroundImage:"url(".concat(a.boardStyle.bgurl,")")},children:Object(r.jsx)("div",{className:"content",children:Object(r.jsx)("p",{children:t.title})})})})}function Jt(e){var t=e.boards,a=e.title,n=e.toggleNewBoard,c=t;return Object(r.jsxs)("section",{className:"board-list ",children:[Object(r.jsx)("h2",{className:"title",children:a}),Object(r.jsxs)("ul",{className:"flex wrap",children:[c.map((function(e){return Object(r.jsx)(Pt,{board:e,className:"board"},e._id)})),"Templates boards"!==a&&Object(r.jsx)("li",{onClick:n,className:"board-preview add-board-btn",children:Object(r.jsx)("p",{children:"+ Add board"})})]})]})}var Ht=function(e){Object(k.a)(a,e);var t=Object(w.a)(a);function a(){var e;Object(x.a)(this,a);for(var r=arguments.length,n=new Array(r),c=0;c<r;c++)n[c]=arguments[c];return(e=t.call.apply(t,[this].concat(n))).state={title:"",bgurl:""},e.handleChange=function(t){var a=t.target.value,r=t.target.name;e.setState(Object(ce.a)({},r,a))},e.onChooseBackground=function(t){e.setState({bgurl:t},(function(){e.onSubmit()}))},e.onSubmit=Object(v.a)(O.a.mark((function t(){var a;return O.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.state.title){t.next=2;break}return t.abrupt("return");case 2:return t.next=4,e.props.createBoard(e.state.title,e.state.bgurl);case 4:a=t.sent,e.props.onLoadNewBoard(a._id);case 6:case"end":return t.stop()}}),t)}))),e.onCancelAdd=function(t){t.preventDefault(),e.props.toggleNewBoard()},e.stopPropagation=function(e){e.stopPropagation()},e}return Object(y.a)(a,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){var e=this;return Object(r.jsx)("div",{className:"screen",onClick:this.onCancelAdd,children:Object(r.jsxs)("div",{className:"add-board",onSubmit:this.onSubmit,onClick:this.stopPropagation,children:[Object(r.jsx)("input",{placeholder:"Enter a title for your new board...",type:"text",onChange:this.handleChange,value:this.state.title,name:"title",autoComplete:"off",required:!0}),Object(r.jsxs)("section",{className:"add-board-backgrounds",children:[Object(r.jsx)("h3",{children:"Enter a title, Choose a background - and get started!"}),[{id:"bg101",bgurl:"https://cdn.pixabay.com/photo/2020/04/11/18/24/star-5031540_1280.jpg"},{id:"bg102",bgurl:"https://cdn.pixabay.com/photo/2016/11/29/08/00/abstract-1868269_1280.jpg"},{id:"bg103",bgurl:"https://cdn.pixabay.com/photo/2019/03/23/20/54/bamboo-4076262_1280.jpg"},{id:"bg104",bgurl:"https://cdn.pixabay.com/photo/2013/07/21/13/00/rose-165819_1280.jpg"},{id:"bg105",bgurl:"https://cdn.pixabay.com/photo/2014/09/14/18/04/dandelion-445228_1280.jpg"},{id:"bg106",bgurl:"https://cdn.pixabay.com/photo/2017/05/11/11/15/workplace-2303851_1280.jpg"},{id:"bg107",bgurl:"https://cdn.pixabay.com/photo/2016/02/19/11/33/backround-1209772_1280.jpg"},{id:"bg108",bgurl:"https://cdn.pixabay.com/photo/2017/08/15/15/37/pen-2644392_1280.jpg"},{id:"bg109",bgurl:"https://cdn.pixabay.com/photo/2018/01/11/21/27/laptop-3076957_1280.jpg"},{id:"bg110",bgurl:"https://cdn.pixabay.com/photo/2018/05/31/13/13/rain-3443977_1280.jpg"},{id:"bg111",bgurl:"https://cdn.pixabay.com/photo/2014/04/05/11/38/bokeh-316425_1280.jpg"},{id:"bg112",bgurl:"https://cdn.pixabay.com/photo/2013/07/25/13/01/stones-167089_1280.jpg"}].map((function(t){return Object(r.jsx)("div",{className:"backgrounds-tumbs",style:{backgroundImage:"url(".concat(t.bgurl,")")},onClick:function(){return e.onChooseBackground(t.bgurl)},children:Object(r.jsx)("div",{className:"plus",children:"+"})},t.id)}))]})]})})}}]),a}(n.Component),zt={createBoard:function(e,t){return function(){var a=Object(v.a)(O.a.mark((function a(r){var n;return O.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,W.makeBoard(e,t);case 3:return n=a.sent,r({type:"SET_BOARD",board:n}),a.abrupt("return",n);case 8:a.prev=8,a.t0=a.catch(0),console.log("BoardActions: err in loadBoard",a.t0);case 11:case"end":return a.stop()}}),a,null,[[0,8]])})));return function(e){return a.apply(this,arguments)}}()}},Xt=Object(i.b)((function(e){return{}}),zt)(Ht),qt=function(e){Object(k.a)(a,e);var t=Object(w.a)(a);function a(){var e;Object(x.a)(this,a);for(var r=arguments.length,n=new Array(r),c=0;c<r;c++)n[c]=arguments[c];return(e=t.call.apply(t,[this].concat(n))).state={isNewBoard:!1},e.toggleNewBoard=function(){e.setState({isNewBoard:!e.state.isNewBoard})},e.onLoadNewBoard=function(t){e.toggleNewBoard(),e.props.history.push("/board/".concat(t))},e}return Object(y.a)(a,[{key:"componentDidMount",value:function(){var e;this.props.loadBoards({userId:"6004748cf9fd65ff47dc81e4"});var t=(null===(e=this.props.loggedInUser)||void 0===e?void 0:e._id)||"6007ffeea8c0ad4b8ad3c478";this.props.loadBoards({userId:t})}},{key:"render",value:function(){return Object(r.jsxs)(c.a.Fragment,{children:[Object(r.jsx)(u,{loggedInUser:this.props.loggedInUser}),Object(r.jsxs)("div",{className:"boards flex col",children:[Object(r.jsx)("h1",{children:"TASX"}),Object(r.jsx)("h2",{children:"Get on Board"}),Object(r.jsx)("hr",{}),Object(r.jsxs)("section",{className:"board-lists main-container",children:[this.props.templatesBoards&&Object(r.jsx)(Jt,{boards:this.props.templatesBoards,title:"Templates boards",toggleNewBoard:this.toggleNewBoard}),Object(r.jsx)(Jt,{boards:this.props.boards,title:"Personal boards",toggleNewBoard:this.toggleNewBoard})]}),this.state.isNewBoard&&Object(r.jsx)(Xt,{toggleNewBoard:this.toggleNewBoard,onLoadNewBoard:this.onLoadNewBoard})]})]})}}]),a}(n.Component),Wt={loadBoards:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(){var t=Object(v.a)(O.a.mark((function t(a){var r;return O.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,W.query(e);case 3:r=t.sent,"6004748cf9fd65ff47dc81e4"===e.userId?a({type:"SET_TEMPLATES",boards:r}):a({type:"SET_BOARDS",boards:r}),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),console.log("BoardActions: err in loadBoards",t.t0);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e){return t.apply(this,arguments)}}()}},Zt=Object(i.b)((function(e){return{boards:e.boardModule.boards,templatesBoards:e.boardModule.templatesBoards,loggedInUser:e.userModule.loggedInUser}}),Wt)(qt),Kt=function(e){Object(k.a)(a,e);var t=Object(w.a)(a);function a(){var e;Object(x.a)(this,a);for(var r=arguments.length,n=new Array(r),c=0;c<r;c++)n[c]=arguments[c];return(e=t.call.apply(t,[this].concat(n))).state={msg:"",loginCred:{username:"",password:""},signupCred:{username:"",password:"",fullname:""}},e.loginHandleChange=function(t){var a=t.target,r=a.name,n=a.value;e.setState((function(e){return{loginCred:Object(m.a)(Object(m.a)({},e.loginCred),{},Object(ce.a)({},r,n))}}))},e.signupHandleChange=function(t){var a=t.target,r=a.name,n=a.value;e.setState((function(e){return{signupCred:Object(m.a)(Object(m.a)({},e.signupCred),{},Object(ce.a)({},r,n))}}))},e.doLogin=function(){var t=Object(v.a)(O.a.mark((function t(a){var r,n,c,s;return O.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a.preventDefault(),r=e.state.loginCred,n=r.username,c=r.password,n){t.next=4;break}return t.abrupt("return",e.setState({msg:"Please enter user/password"}));case 4:s={username:n,password:c};try{e.props.login(s),e.setState({loginCred:{username:"",password:""}})}catch(o){e.setState({msg:"Login failed, try again."})}case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.doSignup=function(){var t=Object(v.a)(O.a.mark((function t(a){var r,n,c,s,o;return O.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a.preventDefault(),r=e.state.signupCred,n=r.username,c=r.password,s=r.fullname,n&&c&&s){t.next=4;break}return t.abrupt("return",e.setState({msg:"All inputs are required"}));case 4:o={username:n,password:c,fullname:s},e.props.signup(o),e.setState({signupCred:{username:"",password:"",fullname:""}});case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.removeUser=function(t){e.props.removeUser(t)},e}return Object(y.a)(a,[{key:"componentDidMount",value:function(){this.props.loadUsers()}},{key:"render",value:function(){var e=Object(r.jsxs)("form",{className:"frm",onSubmit:this.doSignup,children:[Object(r.jsx)("h2",{children:"Signup"}),Object(r.jsx)("input",{type:"text",name:"fullname",value:this.state.signupCred.fullname,onChange:this.signupHandleChange,placeholder:"Full name",autoComplete:"fullname"}),Object(r.jsx)("input",{name:"password",type:"password",value:this.state.signupCred.password,onChange:this.signupHandleChange,placeholder:"Password",autoComplete:"current-password"}),Object(r.jsx)("input",{type:"text",name:"username",value:this.state.signupCred.username,onChange:this.signupHandleChange,placeholder:"Username",autoComplete:"username"}),Object(r.jsx)("br",{}),Object(r.jsx)("button",{children:"Signup"})]}),t=Object(r.jsxs)("form",{className:"frm",onSubmit:this.doLogin,children:[Object(r.jsx)("h2",{children:"Login"}),Object(r.jsxs)("select",{name:"username",value:this.state.loginCred.username,onChange:this.loginHandleChange,children:[Object(r.jsx)("option",{value:"",children:"Select User"}),this.props.users&&this.props.users.map((function(e){return Object(r.jsx)("option",{value:e.username,children:e.fullname},e._id)}))]}),Object(r.jsx)("button",{children:"Login"})]}),a=this.props.loggedInUser;return Object(r.jsxs)("div",{className:"login",children:[Object(r.jsx)(u,{}),Object(r.jsx)("h1",{children:"TASKX"}),Object(r.jsx)("p",{children:this.state.msg}),a&&Object(r.jsx)("div",{children:Object(r.jsxs)("h3",{children:["Welcome ",a.fullname,Object(r.jsx)("button",{onClick:this.props.logout,children:"Logout"})]})}),!a&&t,!a&&e]})}}]),a}(n.Component),Vt={login:function(e){return function(){var t=Object(v.a)(O.a.mark((function t(a){var r;return O.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,L.login(e);case 3:r=t.sent,a({type:"SET_USER",user:r}),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),console.log("UserActions: err in login",t.t0);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e){return t.apply(this,arguments)}}()},logout:function(){return function(){var e=Object(v.a)(O.a.mark((function e(t){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,L.logout();case 3:t({type:"SET_USER",user:null}),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),console.log("UserActions: err in logout",e.t0);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t){return e.apply(this,arguments)}}()},signup:function(e){return function(){var t=Object(v.a)(O.a.mark((function t(a){var r;return O.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,L.signup(e);case 3:r=t.sent,a({type:"SET_USER",user:r}),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),console.log("UserActions: err in signup",t.t0);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e){return t.apply(this,arguments)}}()},removeUser:function(e){return function(){var t=Object(v.a)(O.a.mark((function t(a){return O.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,L.remove(e);case 3:a({type:"REMOVE_USER",userId:e}),t.next=9;break;case 6:t.prev=6,t.t0=t.catch(0),console.log("UserActions: err in removeUser",t.t0);case 9:case"end":return t.stop()}}),t,null,[[0,6]])})));return function(e){return t.apply(this,arguments)}}()},loadUsers:le},Yt=Object(i.b)((function(e){return{users:e.userModule.users,loggedInUser:e.userModule.loggedInUser}}),Vt)(Kt);function Qt(){return Object(r.jsx)("div",{className:"app",children:Object(r.jsx)(d.a,{children:Object(r.jsx)("main",{className:"main-app",children:Object(r.jsxs)(l.c,{children:[Object(r.jsx)(l.a,{path:"/board/:id",component:Gt}),Object(r.jsx)(l.a,{path:"/board",component:Zt}),Object(r.jsx)(l.a,{path:"/login",component:Yt}),Object(r.jsx)(l.a,{path:"/",component:g})]})})})})}Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a(375);var $t=a(22),ea=a(156),ta={boards:[],templatesBoards:[],selectedBoard:{},filterBy:{}};var aa=null;sessionStorage.loggedinUser&&(aa=JSON.parse(sessionStorage.loggedinUser));var ra={loggedInUser:aa,users:[]};var na={isLoading:!1};var ca=Object($t.c)({systemModule:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:na,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(t.type){case"LOADING_START":return Object(m.a)(Object(m.a)({},e),{},{isLoading:!0});case"LOADING_DONE":return Object(m.a)(Object(m.a)({},e),{},{isLoading:!1});default:return e}},boardModule:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ta,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(t.type){case"SET_BOARDS":return Object(m.a)(Object(m.a)({},e),{},{boards:t.boards});case"SET_TEMPLATES":return Object(m.a)(Object(m.a)({},e),{},{templatesBoards:t.boards});case"SET_BOARD":return Object(m.a)(Object(m.a)({},e),{},{selectedBoard:t.board});case"SET_FILTER":return Object(m.a)(Object(m.a)({},e),{},{filterBy:t.filterBy});default:return e}},userModule:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ra,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(t.type){case"SET_USER":return Object(m.a)(Object(m.a)({},e),{},{loggedInUser:t.user});case"REMOVE_USER":return Object(m.a)(Object(m.a)({},e),{},{users:e.users.filter((function(e){return e._id!==t.userId}))});case"SET_USERS":return Object(m.a)(Object(m.a)({},e),{},{users:t.users});case"SET_SCORE":return Object(m.a)(Object(m.a)({},e),{},{loggedInUser:Object(m.a)(Object(m.a)({},e.loggedInUser),{},{score:t.score})});default:return e}}}),sa=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||$t.d,oa=Object($t.e)(ca,sa(Object($t.a)(ea.a))),ia=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,381)).then((function(t){var a=t.getCLS,r=t.getFID,n=t.getFCP,c=t.getLCP,s=t.getTTFB;a(e),r(e),n(e),c(e),s(e)}))};o.a.render(Object(r.jsx)(i.a,{store:oa,children:Object(r.jsx)(Qt,{})}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)})),ia()}},[[376,1,2]]]);
//# sourceMappingURL=main.742126fc.chunk.js.map